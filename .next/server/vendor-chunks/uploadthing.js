"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(ssr)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFullApiUrl: () => (/* binding */ getFullApiUrl)\n/* harmony export */ });\n// src/internal/get-full-api-url.ts\nfunction getFullApiUrl(maybeUrl) {\n    const base = (()=>{\n        var _a, _b;\n        if (false) {}\n        if (typeof process !== \"undefined\" && ((_a = process == null ? void 0 : process.env) == null ? void 0 : _a.VERCEL_URL)) {\n            return `https://${process.env.VERCEL_URL}`;\n        }\n        if ((_b = /* unsupported import.meta.env */ undefined) == null ? void 0 : _b.VERCEL_URL) {\n            return `https://${/* unsupported import.meta.env.VERCEL_URL */ undefined.VERCEL_URL}`;\n        }\n        return \"http://localhost:3000\";\n    })();\n    try {\n        const url = new URL(maybeUrl ?? \"/api/uploadthing\", base);\n        if (url.pathname === \"/\") {\n            url.pathname = \"/api/uploadthing\";\n        }\n        return url;\n    } catch (err) {\n        throw new Error(`Failed to parse '${maybeUrl}' as a URL. Make sure it's a valid URL or path`);\n    }\n}\n //# sourceMappingURL=chunk-4PDGVH57.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UERHVkg1Ny5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG1DQUFtQztBQUNuQyxTQUFTQSxjQUFjQyxRQUFRO0lBQzdCLE1BQU1DLE9BQU8sQ0FBQztRQUNaLElBQUlDLElBQUlDO1FBQ1IsSUFBSSxLQUE2QixFQUFFLEVBRWxDO1FBQ0QsSUFBSSxPQUFPSSxZQUFZLGVBQWdCLEVBQUNMLEtBQUtLLFdBQVcsT0FBTyxLQUFLLElBQUlBLFFBQVFDLEdBQUcsS0FBSyxPQUFPLEtBQUssSUFBSU4sR0FBR08sVUFBVSxHQUFHO1lBQ3RILE9BQU8sQ0FBQyxRQUFRLEVBQUVGLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUM7UUFDNUM7UUFDQSxJQUFJLENBQUNOLEtBQUssMkNBQWUsS0FBSyxPQUFPLEtBQUssSUFBSUEsR0FBR00sVUFBVSxFQUFFO1lBQzNELE9BQU8sQ0FBQyxRQUFRLEVBQUUsaUVBQTBCLENBQUMsQ0FBQztRQUNoRDtRQUNBLE9BQU87SUFDVDtJQUNBLElBQUk7UUFDRixNQUFNQyxNQUFNLElBQUlDLElBQUlYLFlBQVksb0JBQW9CQztRQUNwRCxJQUFJUyxJQUFJRSxRQUFRLEtBQUssS0FBSztZQUN4QkYsSUFBSUUsUUFBUSxHQUFHO1FBQ2pCO1FBQ0EsT0FBT0Y7SUFDVCxFQUFFLE9BQU9HLEtBQUs7UUFDWixNQUFNLElBQUlDLE1BQ1IsQ0FBQyxpQkFBaUIsRUFBRWQsU0FBUyw4Q0FBOEMsQ0FBQztJQUVoRjtBQUNGO0FBSUUsQ0FDRiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ldmVudGx5Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvY2h1bmstNFBER1ZINTcubWpzPzI0ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVybmFsL2dldC1mdWxsLWFwaS11cmwudHNcbmZ1bmN0aW9uIGdldEZ1bGxBcGlVcmwobWF5YmVVcmwpIHtcbiAgY29uc3QgYmFzZSA9ICgoKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9hID0gcHJvY2VzcyA9PSBudWxsID8gdm9pZCAwIDogcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBfYS5WRVJDRUxfVVJMKSkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7cHJvY2Vzcy5lbnYuVkVSQ0VMX1VSTH1gO1xuICAgIH1cbiAgICBpZiAoKF9iID0gaW1wb3J0Lm1ldGEuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2IuVkVSQ0VMX1VSTCkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7aW1wb3J0Lm1ldGEuZW52LlZFUkNFTF9VUkx9YDtcbiAgICB9XG4gICAgcmV0dXJuIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG4gIH0pKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChtYXliZVVybCA/PyBcIi9hcGkvdXBsb2FkdGhpbmdcIiwgYmFzZSk7XG4gICAgaWYgKHVybC5wYXRobmFtZSA9PT0gXCIvXCIpIHtcbiAgICAgIHVybC5wYXRobmFtZSA9IFwiL2FwaS91cGxvYWR0aGluZ1wiO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIHBhcnNlICcke21heWJlVXJsfScgYXMgYSBVUkwuIE1ha2Ugc3VyZSBpdCdzIGEgdmFsaWQgVVJMIG9yIHBhdGhgXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBnZXRGdWxsQXBpVXJsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstNFBER1ZINTcubWpzLm1hcCJdLCJuYW1lcyI6WyJnZXRGdWxsQXBpVXJsIiwibWF5YmVVcmwiLCJiYXNlIiwiX2EiLCJfYiIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIlZFUkNFTF9VUkwiLCJ1cmwiLCJVUkwiLCJwYXRobmFtZSIsImVyciIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeParseResponseXML: () => (/* binding */ maybeParseResponseXML),\n/* harmony export */   uploadPart: () => (/* binding */ uploadPart),\n/* harmony export */   uploadPartWithProgress: () => (/* binding */ uploadPartWithProgress)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n// src/internal/multi-part.ts\n\n// src/internal/s3-error-parser.ts\nvar maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch == null ? void 0 : codeMatch[1];\n    const message = messageMatch == null ? void 0 : messageMatch[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\nvar DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nvar s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    // 403 Forbidden\n    EntityTooSmall: \"TOO_SMALL\",\n    // 400 Bad Request\n    EntityTooLarge: \"TOO_LARGE\",\n    // 400 Bad Request\n    ExpiredToken: \"FORBIDDEN\",\n    // 400 Bad Request\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    // 400 Bad Request\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    // 500 Internal Server Error\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    // 400 Bad Request\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\n// src/internal/multi-part.ts\nasync function uploadPart(opts, retryCount = 0) {\n    const s3Res = await opts.fetch(opts.url, {\n        method: \"PUT\",\n        body: opts.chunk,\n        headers: {\n            \"Content-Type\": opts.contentType,\n            \"Content-Disposition\": [\n                opts.contentDisposition,\n                `filename=\"${encodeURI(opts.fileName)}\"`,\n                `filename*=UTF-8''${encodeURI(opts.fileName)}`\n            ].join(\"; \")\n        }\n    });\n    if (s3Res.ok) {\n        const etag = s3Res.headers.get(\"Etag\");\n        if (!etag) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Missing Etag header from uploaded part\"\n            });\n        }\n        return etag.replace(/\"/g, \"\");\n    }\n    if (retryCount < opts.maxRetries) {\n        const delay = 2 ** retryCount * 1e3;\n        await new Promise((r)=>setTimeout(r, delay));\n        return uploadPart(opts, retryCount++);\n    }\n    await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/api/failureCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: opts.key\n        }),\n        headers: opts.utRequestHeaders\n    });\n    const text = await s3Res.text();\n    const parsed = maybeParseResponseXML(text);\n    if (parsed == null ? void 0 : parsed.message) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"UPLOAD_FAILED\",\n            message: parsed.message\n        });\n    }\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"Failed to upload file to storage provider\",\n        cause: s3Res\n    });\n}\nasync function uploadPartWithProgress(opts, retryCount = 0) {\n    return new Promise((resolve, reject)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", [\n            opts.contentDisposition,\n            `filename=\"${encodeURI(opts.fileName)}\"`,\n            `filename*=UTF-8''${encodeURI(opts.fileName)}`\n        ].join(\"; \"));\n        xhr.onload = async ()=>{\n            if (xhr.status >= 200 && xhr.status < 300) {\n                const etag = xhr.getResponseHeader(\"Etag\");\n                etag ? resolve(etag) : reject(\"NO ETAG\");\n            } else if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 1e3;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        let lastProgress = 0;\n        xhr.onerror = async ()=>{\n            lastProgress = 0;\n            if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 100;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        xhr.upload.onprogress = (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        };\n        xhr.send(opts.chunk);\n    });\n}\n //# sourceMappingURL=chunk-S3R3VXRK.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZCQUE2QjtBQUNrRDtBQUUvRSxrQ0FBa0M7QUFDbEMsSUFBSUUsd0JBQXdCLENBQUNDO0lBQzNCLE1BQU1DLFlBQVlELFNBQVNFLEtBQUssQ0FBQztJQUNqQyxNQUFNQyxlQUFlSCxTQUFTRSxLQUFLLENBQUM7SUFDcEMsTUFBTUUsT0FBT0gsYUFBYSxPQUFPLEtBQUssSUFBSUEsU0FBUyxDQUFDLEVBQUU7SUFDdEQsTUFBTUksVUFBVUYsZ0JBQWdCLE9BQU8sS0FBSyxJQUFJQSxZQUFZLENBQUMsRUFBRTtJQUMvRCxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsU0FDWixPQUFPO0lBQ1QsT0FBTztRQUFFRCxNQUFNRSx1QkFBdUIsQ0FBQ0YsS0FBSyxJQUFJRztRQUFvQkY7SUFBUTtBQUM5RTtBQUNBLElBQUlFLHFCQUFxQjtBQUN6QixJQUFJRCwwQkFBMEI7SUFDNUJFLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEJDLHFDQUFxQztJQUNyQyxrQkFBa0I7SUFDbEJDLGVBQWU7SUFDZiw0QkFBNEI7SUFDNUJDLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEJDLDBCQUEwQjtBQUU1QjtBQUVBLDZCQUE2QjtBQUM3QixlQUFlQyxXQUFXQyxJQUFJLEVBQUVDLGFBQWEsQ0FBQztJQUM1QyxNQUFNQyxRQUFRLE1BQU1GLEtBQUtHLEtBQUssQ0FBQ0gsS0FBS0ksR0FBRyxFQUFFO1FBQ3ZDQyxRQUFRO1FBQ1JDLE1BQU1OLEtBQUtPLEtBQUs7UUFDaEJDLFNBQVM7WUFDUCxnQkFBZ0JSLEtBQUtTLFdBQVc7WUFDaEMsdUJBQXVCO2dCQUNyQlQsS0FBS1Usa0JBQWtCO2dCQUN2QixDQUFDLFVBQVUs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Z0JBQzNDLE1BQU1ZLHVCQUF1Qi9CLE1BQU1DLGFBQWE7WUFDbEQsT0FBTztnQkFDTGdDLE9BQU87WUFDVDtRQUNGO1FBQ0FDLElBQUlhLE1BQU0sQ0FBQ0MsVUFBVSxHQUFHLENBQUNDO1lBQ3ZCLE1BQU1DLFFBQVFELEVBQUVFLE1BQU0sR0FBR047WUFDekJBLGdCQUFnQks7WUFDaEJsRCxLQUFLb0QsVUFBVSxDQUFDRjtRQUNsQjtRQUNBaEIsSUFBSW1CLElBQUksQ0FBQ3JELEtBQUtPLEtBQUs7SUFDckI7QUFDRjtBQU1FLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXZlbnRseS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NodW5rLVMzUjNWWFJLLm1qcz9hNDRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5pbXBvcnQgeyBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLCBVcGxvYWRUaGluZ0Vycm9yIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL2ludGVybmFsL3MzLWVycm9yLXBhcnNlci50c1xudmFyIG1heWJlUGFyc2VSZXNwb25zZVhNTCA9IChtYXliZVhtbCkgPT4ge1xuICBjb25zdCBjb2RlTWF0Y2ggPSBtYXliZVhtbC5tYXRjaCgvPENvZGU+KC4qPyk8XFwvQ29kZT4vcyk7XG4gIGNvbnN0IG1lc3NhZ2VNYXRjaCA9IG1heWJlWG1sLm1hdGNoKC88TWVzc2FnZT4oLio/KTxcXC9NZXNzYWdlPi9zKTtcbiAgY29uc3QgY29kZSA9IGNvZGVNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogY29kZU1hdGNoWzFdO1xuICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZU1hdGNoID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlTWF0Y2hbMV07XG4gIGlmICghY29kZSB8fCAhbWVzc2FnZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHsgY29kZTogczNDb2RlVG9VcGxvYWRUaGluZ0NvZGVbY29kZV0gPz8gREVGQVVMVF9FUlJPUl9DT0RFLCBtZXNzYWdlIH07XG59O1xudmFyIERFRkFVTFRfRVJST1JfQ09ERSA9IFwiVVBMT0FEX0ZBSUxFRFwiO1xudmFyIHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlID0ge1xuICBBY2Nlc3NEZW5pZWQ6IFwiRk9SQklEREVOXCIsXG4gIC8vIDQwMyBGb3JiaWRkZW5cbiAgRW50aXR5VG9vU21hbGw6IFwiVE9PX1NNQUxMXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBFbnRpdHlUb29MYXJnZTogXCJUT09fTEFSR0VcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEV4cGlyZWRUb2tlbjogXCJGT1JCSURERU5cIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEluY29ycmVjdE51bWJlck9mRmlsZXNJblBvc3RSZXF1ZXN0OiBcIlRPT19NQU5ZX0ZJTEVTXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBJbnRlcm5hbEVycm9yOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAvLyA1MDAgSW50ZXJuYWwgU2VydmVyIEVycm9yXG4gIEtleVRvb0xvbmdFcnJvcjogXCJLRVlfVE9PX0xPTkdcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIE1heE1lc3NhZ2VMZW5ndGhFeGNlZWRlZDogXCJUT09fTEFSR0VcIlxuICAvLyA0MDAgQmFkIFJlcXVlc3Rcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0KG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIGNvbnN0IHMzUmVzID0gYXdhaXQgb3B0cy5mZXRjaChvcHRzLnVybCwge1xuICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICBib2R5OiBvcHRzLmNodW5rLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IG9wdHMuY29udGVudFR5cGUsXG4gICAgICBcIkNvbnRlbnQtRGlzcG9zaXRpb25cIjogW1xuICAgICAgICBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgYGZpbGVuYW1lPVwiJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9XCJgLFxuICAgICAgICBgZmlsZW5hbWUqPVVURi04Jycke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1gXG4gICAgICBdLmpvaW4oXCI7IFwiKVxuICAgIH1cbiAgfSk7XG4gIGlmIChzM1Jlcy5vaykge1xuICAgIGNvbnN0IGV0YWcgPSBzM1Jlcy5oZWFkZXJzLmdldChcIkV0YWdcIik7XG4gICAgaWYgKCFldGFnKSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgRXRhZyBoZWFkZXIgZnJvbSB1cGxvYWRlZCBwYXJ0XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZXRhZy5yZXBsYWNlKC9cIi9nLCBcIlwiKTtcbiAgfVxuICBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgIGNvbnN0IGRlbGF5ID0gMiAqKiByZXRyeUNvdW50ICogMWUzO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIGRlbGF5KSk7XG4gICAgcmV0dXJuIHVwbG9hZFBhcnQob3B0cywgcmV0cnlDb3VudCsrKTtcbiAgfVxuICBhd2FpdCBvcHRzLmZldGNoKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvYXBpL2ZhaWx1cmVDYWxsYmFja1wiKSwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZmlsZUtleTogb3B0cy5rZXlcbiAgICB9KSxcbiAgICBoZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNcbiAgfSk7XG4gIGNvbnN0IHRleHQgPSBhd2FpdCBzM1Jlcy50ZXh0KCk7XG4gIGNvbnN0IHBhcnNlZCA9IG1heWJlUGFyc2VSZXNwb25zZVhNTCh0ZXh0KTtcbiAgaWYgKHBhcnNlZCA9PSBudWxsID8gdm9pZCAwIDogcGFyc2VkLm1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgIG1lc3NhZ2U6IHBhcnNlZC5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbiAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlIHRvIHN0b3JhZ2UgcHJvdmlkZXJcIixcbiAgICBjYXVzZTogczNSZXNcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oXCJQVVRcIiwgb3B0cy51cmwsIHRydWUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIG9wdHMuZmlsZVR5cGUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsXG4gICAgICBbXG4gICAgICAgIG9wdHMuY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICBgZmlsZW5hbWU9XCIke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1cImAsXG4gICAgICAgIGBmaWxlbmFtZSo9VVRGLTgnJyR7ZW5jb2RlVVJJKG9wdHMuZmlsZU5hbWUpfWBcbiAgICAgIF0uam9pbihcIjsgXCIpXG4gICAgKTtcbiAgICB4aHIub25sb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgY29uc3QgZXRhZyA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIkV0YWdcIik7XG4gICAgICAgIGV0YWcgPyByZXNvbHZlKGV0YWcpIDogcmVqZWN0KFwiTk8gRVRBR1wiKTtcbiAgICAgIH0gZWxzZSBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIHJldHJ5Q291bnQpICogMWUzO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgZGVsYXkpKTtcbiAgICAgICAgYXdhaXQgdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoXCJNYXggcmV0cmllcyBleGNlZWRlZFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxldCBsYXN0UHJvZ3Jlc3MgPSAwO1xuICAgIHhoci5vbmVycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgICAgbGFzdFByb2dyZXNzID0gMDtcbiAgICAgIGlmIChyZXRyeUNvdW50IDwgb3B0cy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgcmV0cnlDb3VudCkgKiAxMDA7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXMpID0+IHNldFRpbWVvdXQocmVzLCBkZWxheSkpO1xuICAgICAgICBhd2FpdCB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdChcIk1heCByZXRyaWVzIGV4Y2VlZGVkXCIpO1xuICAgICAgfVxuICAgIH07XG4gICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGRlbHRhID0gZS5sb2FkZWQgLSBsYXN0UHJvZ3Jlc3M7XG4gICAgICBsYXN0UHJvZ3Jlc3MgKz0gZGVsdGE7XG4gICAgICBvcHRzLm9uUHJvZ3Jlc3MoZGVsdGEpO1xuICAgIH07XG4gICAgeGhyLnNlbmQob3B0cy5jaHVuayk7XG4gIH0pO1xufVxuXG5leHBvcnQge1xuICBtYXliZVBhcnNlUmVzcG9uc2VYTUwsXG4gIHVwbG9hZFBhcnQsXG4gIHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1TM1IzVlhSSy5tanMubWFwIl0sIm5hbWVzIjpbImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwiLCJVcGxvYWRUaGluZ0Vycm9yIiwibWF5YmVQYXJzZVJlc3BvbnNlWE1MIiwibWF5YmVYbWwiLCJjb2RlTWF0Y2giLCJtYXRjaCIsIm1lc3NhZ2VNYXRjaCIsImNvZGUiLCJtZXNzYWdlIiwiczNDb2RlVG9VcGxvYWRUaGluZ0NvZGUiLCJERUZBVUxUX0VSUk9SX0NPREUiLCJBY2Nlc3NEZW5pZWQiLCJFbnRpdHlUb29TbWFsbCIsIkVudGl0eVRvb0xhcmdlIiwiRXhwaXJlZFRva2VuIiwiSW5jb3JyZWN0TnVtYmVyT2ZGaWxlc0luUG9zdFJlcXVlc3QiLCJJbnRlcm5hbEVycm9yIiwiS2V5VG9vTG9uZ0Vycm9yIiwiTWF4TWVzc2FnZUxlbmd0aEV4Y2VlZGVkIiwidXBsb2FkUGFydCIsIm9wdHMiLCJyZXRyeUNvdW50IiwiczNSZXMiLCJmZXRjaCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJjaHVuayIsImhlYWRlcnMiLCJjb250ZW50VHlwZSIsImNvbnRlbnREaXNwb3NpdGlvbiIsImVuY29kZVVSSSIsImZpbGVOYW1lIiwiam9pbiIsIm9rIiwiZXRhZyIsImdldCIsInJlcGxhY2UiLCJtYXhSZXRyaWVzIiwiZGVsYXkiLCJQcm9taXNlIiwiciIsInNldFRpbWVvdXQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsZUtleSIsImtleSIsInV0UmVxdWVzdEhlYWRlcnMiLCJ0ZXh0IiwicGFyc2VkIiwiY2F1c2UiLCJ1cGxvYWRQYXJ0V2l0aFByb2dyZXNzIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJmaWxlVHlwZSIsIm9ubG9hZCIsInN0YXR1cyIsImdldFJlc3BvbnNlSGVhZGVyIiwiTWF0aCIsInBvdyIsInJlcyIsImxhc3RQcm9ncmVzcyIsIm9uZXJyb3IiLCJ1cGxvYWQiLCJvbnByb2dyZXNzIiwiZSIsImRlbHRhIiwibG9hZGVkIiwib25Qcm9ncmVzcyIsInNlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/client.mjs":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/dist/client.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DANGEROUS__uploadFiles: () => (/* binding */ DANGEROUS__uploadFiles),\n/* harmony export */   INTERNAL_DO_NOT_USE__fatalClientError: () => (/* binding */ INTERNAL_DO_NOT_USE__fatalClientError),\n/* harmony export */   INTERNAL_doFormatting: () => (/* binding */ INTERNAL_doFormatting),\n/* harmony export */   allowedContentTextLabelGenerator: () => (/* binding */ allowedContentTextLabelGenerator),\n/* harmony export */   capitalizeStart: () => (/* binding */ capitalizeStart),\n/* harmony export */   classNames: () => (/* binding */ classNames),\n/* harmony export */   contentFieldToContent: () => (/* binding */ contentFieldToContent),\n/* harmony export */   genUploader: () => (/* binding */ genUploader),\n/* harmony export */   generateClientDropzoneAccept: () => (/* binding */ generateClientDropzoneAccept),\n/* harmony export */   generateMimeTypes: () => (/* binding */ generateMimeTypes),\n/* harmony export */   generatePermittedFileTypes: () => (/* binding */ generatePermittedFileTypes),\n/* harmony export */   getFullApiUrl: () => (/* reexport safe */ _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_1__.getFullApiUrl),\n/* harmony export */   styleFieldToClassName: () => (/* binding */ styleFieldToClassName),\n/* harmony export */   styleFieldToCssObject: () => (/* binding */ styleFieldToCssObject)\n/* harmony export */ });\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-4PDGVH57.mjs */ \"(ssr)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n\n// src/client.ts\n\n// src/internal/ut-reporter.ts\n\nvar createAPIRequestUrl = (config)=>{\n    const url = new URL(config.url);\n    const queryParams = new URLSearchParams(url.search);\n    queryParams.set(\"actionType\", config.actionType);\n    queryParams.set(\"slug\", config.slug);\n    url.search = queryParams.toString();\n    return url;\n};\nvar createUTReporter = (cfg)=>{\n    return async (type, payload)=>{\n        const url = createAPIRequestUrl({\n            url: cfg.url,\n            slug: cfg.endpoint,\n            actionType: type\n        });\n        const response = await fetch(url, {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        switch(type){\n            case \"failure\":\n                {\n                    const p = payload;\n                    const parsed = (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.maybeParseResponseXML)(p.s3Error ?? \"\");\n                    if (parsed == null ? void 0 : parsed.message) {\n                        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                            code: parsed.code,\n                            message: parsed.message\n                        });\n                    } else {\n                        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                            code: \"UPLOAD_FAILED\",\n                            message: `Failed to upload file ${p.fileName} to S3`,\n                            cause: p.s3Error\n                        });\n                    }\n                }\n        }\n        return response.ok;\n    };\n};\n// src/internal/component-theming.ts\n\nvar generatePermittedFileTypes = (config)=>{\n    const fileTypes = config ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.objectKeys)(config) : [];\n    const maxFileCount = config ? Object.values(config).map((v)=>v.maxFileCount) : [];\n    return {\n        fileTypes,\n        multiple: maxFileCount.some((v)=>v && v > 1)\n    };\n};\nvar capitalizeStart = (str)=>{\n    return str.charAt(0).toUpperCase() + str.slice(1);\n};\nvar INTERNAL_doFormatting = (config)=>{\n    if (!config) return \"\";\n    const allowedTypes = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.objectKeys)(config);\n    const formattedTypes = allowedTypes.map((f)=>f === \"blob\" ? \"file\" : f);\n    if (formattedTypes.length > 1) {\n        const lastType = formattedTypes.pop();\n        return `${formattedTypes.join(\"s, \")} and ${lastType}s`;\n    }\n    const key = allowedTypes[0];\n    const formattedKey = formattedTypes[0];\n    const { maxFileSize, maxFileCount } = config[key];\n    if (maxFileCount && maxFileCount > 1) {\n        return `${formattedKey}s up to ${maxFileSize}, max ${maxFileCount}`;\n    } else {\n        return `${formattedKey} (${maxFileSize})`;\n    }\n};\nvar allowedContentTextLabelGenerator = (config)=>{\n    return capitalizeStart(INTERNAL_doFormatting(config));\n};\nvar styleFieldToClassName = (styleField, args)=>{\n    if (typeof styleField === \"string\") return styleField;\n    if (typeof styleField === \"function\") {\n        const result = styleField(args);\n        if (typeof result === \"string\") return result;\n    }\n    return \"\";\n};\nvar styleFieldToCssObject = (styleField, args)=>{\n    if (typeof styleField === \"object\") return styleField;\n    if (typeof styleField === \"function\") {\n        const result = styleField(args);\n        if (typeof result === \"object\") return result;\n    }\n    return {};\n};\nvar contentFieldToContent = (contentField, arg)=>{\n    if (!contentField) return null;\n    if (typeof contentField !== \"function\") return contentField;\n    if (typeof contentField === \"function\") {\n        const result = contentField(arg);\n        return result;\n    }\n};\n// src/client.ts\nvar INTERNAL_DO_NOT_USE__fatalClientError = (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n        code: \"INTERNAL_CLIENT_ERROR\",\n        message: \"Something went wrong. Please report this to UploadThing.\",\n        cause: e\n    });\nvar DANGEROUS__uploadFiles = async (endpoint, opts)=>{\n    const reportEventToUT = createUTReporter({\n        endpoint: String(endpoint),\n        url: opts.url\n    });\n    const s3ConnectionRes = await fetch(createAPIRequestUrl({\n        url: opts.url,\n        slug: String(endpoint),\n        actionType: \"upload\"\n    }), {\n        method: \"POST\",\n        body: JSON.stringify({\n            input: \"input\" in opts ? opts.input : null,\n            files: opts.files.map((f)=>({\n                    name: f.name,\n                    size: f.size\n                }))\n        }),\n        // Express requires Content-Type to be explicitly set to parse body properly\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }).then(async (res)=>{\n        if (!res.ok) {\n            const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.fromResponse(res);\n            throw error;\n        }\n        const jsonOrError = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.safeParseJSON)(res);\n        if (jsonOrError instanceof Error) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: jsonOrError.message,\n                cause: res\n            });\n        }\n        return jsonOrError;\n    });\n    if (!s3ConnectionRes || !Array.isArray(s3ConnectionRes)) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n            code: \"BAD_REQUEST\",\n            message: \"No URL. How did you even get here?\",\n            cause: s3ConnectionRes\n        });\n    }\n    const fileUploadPromises = s3ConnectionRes.map(async (presigned)=>{\n        const file = opts.files.find((f)=>f.name === presigned.fileName);\n        if (!file) {\n            console.error(\"No file found for presigned URL\", presigned);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: \"No file found for presigned URL\",\n                cause: `Expected file with name ${presigned.fileName} but got '${opts.files.join(\",\")}'`\n            });\n        }\n        const { presignedUrls, uploadId, chunkSize, contentDisposition, key, pollingUrl, pollingJwt } = presigned;\n        let uploadedBytes = 0;\n        let etags;\n        try {\n            etags = await Promise.all(presignedUrls.map(async (url, index)=>{\n                const offset = chunkSize * index;\n                const end = Math.min(offset + chunkSize, file.size);\n                const chunk = file.slice(offset, end);\n                const etag = await (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadPartWithProgress)({\n                    url,\n                    chunk,\n                    contentDisposition,\n                    fileType: file.type,\n                    fileName: file.name,\n                    maxRetries: 10,\n                    onProgress: (delta)=>{\n                        var _a;\n                        uploadedBytes += delta;\n                        const percent = uploadedBytes / file.size * 100;\n                        (_a = opts.onUploadProgress) == null ? void 0 : _a.call(opts, {\n                            file: file.name,\n                            progress: percent\n                        });\n                    }\n                });\n                return {\n                    tag: etag,\n                    partNumber: index + 1\n                };\n            }));\n        } catch (error) {\n            await reportEventToUT(\"failure\", {\n                fileKey: key,\n                uploadId,\n                fileName: file.name,\n                s3Error: error.toString()\n            });\n            throw \"unreachable\";\n        }\n        const uploadOk = await reportEventToUT(\"multipart-complete\", {\n            uploadId,\n            fileKey: key,\n            etags\n        });\n        if (!uploadOk) {\n            console.log(\"Failed to alert UT of upload completion\");\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to alert UT of upload completion\"\n            });\n        }\n        await new Promise((r)=>setTimeout(r, 750));\n        const serverData = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.withExponentialBackoff)(async ()=>{\n            const res = await fetch(pollingUrl, {\n                headers: {\n                    authorization: pollingJwt\n                }\n            }).then((r)=>r.json());\n            return res.status === \"done\" ? res.callbackData : void 0;\n        });\n        return {\n            name: file.name,\n            size: file.size,\n            key: presigned.key,\n            serverData,\n            url: \"https://utfs.io/f/\" + key\n        };\n    });\n    return Promise.all(fileUploadPromises);\n};\nvar genUploader = (initOpts)=>{\n    const url = (initOpts == null ? void 0 : initOpts.url) instanceof URL ? initOpts.url : (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_1__.getFullApiUrl)(initOpts == null ? void 0 : initOpts.url);\n    return (endpoint, opts)=>// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        DANGEROUS__uploadFiles(endpoint, {\n            ...opts,\n            url\n        });\n};\nvar classNames = (...classes)=>{\n    return classes.filter(Boolean).join(\" \");\n};\nvar generateMimeTypes = (fileTypes)=>{\n    const accepted = fileTypes.map((type)=>{\n        if (type === \"blob\") return \"blob\";\n        if (type === \"pdf\") return \"application/pdf\";\n        if (type.includes(\"/\")) return type;\n        else return `${type}/*`;\n    });\n    if (accepted.includes(\"blob\")) {\n        return void 0;\n    }\n    return accepted;\n};\nvar generateClientDropzoneAccept = (fileTypes)=>{\n    const mimeTypes = generateMimeTypes(fileTypes);\n    if (!mimeTypes) return void 0;\n    return Object.fromEntries(mimeTypes.map((type)=>[\n            type,\n            []\n        ]));\n};\n //# sourceMappingURL=client.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRzhCO0FBR0E7QUFFOUIsZ0JBQWdCO0FBS2E7QUFFN0IsOEJBQThCO0FBQ3lCO0FBQ3ZELElBQUlPLHNCQUFzQixDQUFDQztJQUN6QixNQUFNQyxNQUFNLElBQUlDLElBQUlGLE9BQU9DLEdBQUc7SUFDOUIsTUFBTUUsY0FBYyxJQUFJQyxnQkFBZ0JILElBQUlJLE1BQU07SUFDbERGLFlBQVlHLEdBQUcsQ0FBQyxjQUFjTixPQUFPTyxVQUFVO0lBQy9DSixZQUFZRyxHQUFHLENBQUMsUUFBUU4sT0FBT1EsSUFBSTtJQUNuQ1AsSUFBSUksTUFBTSxHQUFHRixZQUFZTSxRQUFRO0lBQ2pDLE9BQU9SO0FBQ1Q7QUFDQSxJQUFJUyxtQkFBbUIsQ0FBQ0M7SUFDdEIsT0FBTyxPQUFPQyxNQUFNQztRQUNsQixNQUFNWixNQUFNRixvQkFBb0I7WUFDOUJFLEtBQUtVLElBQUlWLEdBQUc7WUFDWk8sTUFBTUcsSUFBSUcsUUFBUTtZQUNsQlAsWUFBWUs7UUFDZDtRQUNBLE1BQU1HLFdBQVcsTUFBTUMsTUFBTWYsS0FBSztZQUNoQ2dCLFFBQVE7WUFDUkMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDUDtZQUNyQlEsU0FBUztnQkFBRSxnQkFBZ0I7WUFBbUI7UUFDaEQ7UUFDQSxPQUFRVDtZQUNOLEtBQUs7Z0JBQVc7b0JBQ2QsTUFBTVUsSUFBSVQ7b0JBQ1YsTUFBTVUsU0FBUy9CLDBFQUFxQkEsQ0FBQzhCLEVBQUVFLE9BQU8sSUFBSTtvQkFDbEQsSUFBSUQsVUFBVSxPQUFPLEtBQUssSUFBSUEsT0FBT0UsT0FBTyxFQUFFO3dCQUM1QyxNQUFNLElBQUk3QixpRUFBZ0JBLENBQUM7NEJBQ3pCOEIsTUFBTUgsT0FBT0csSUFBSTs0QkFDakJELFNBQVNGLE9BQU9FLE9BQU87d0JBQ3pCO29CQUNGLE9BQU87d0JBQ0wsTUFBTSxJQUFJ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Y2xpZW50Lm1qcz9hNDU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIG1heWJlUGFyc2VSZXNwb25zZVhNTCxcbiAgdXBsb2FkUGFydFdpdGhQcm9ncmVzc1xufSBmcm9tIFwiLi9jaHVuay1TM1IzVlhSSy5tanNcIjtcbmltcG9ydCB7XG4gIGdldEZ1bGxBcGlVcmxcbn0gZnJvbSBcIi4vY2h1bmstNFBER1ZINTcubWpzXCI7XG5cbi8vIHNyYy9jbGllbnQudHNcbmltcG9ydCB7XG4gIHNhZmVQYXJzZUpTT04sXG4gIFVwbG9hZFRoaW5nRXJyb3IgYXMgVXBsb2FkVGhpbmdFcnJvcjIsXG4gIHdpdGhFeHBvbmVudGlhbEJhY2tvZmZcbn0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL2ludGVybmFsL3V0LXJlcG9ydGVyLnRzXG5pbXBvcnQgeyBVcGxvYWRUaGluZ0Vycm9yIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbnZhciBjcmVhdGVBUElSZXF1ZXN0VXJsID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKGNvbmZpZy51cmwpO1xuICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXJsLnNlYXJjaCk7XG4gIHF1ZXJ5UGFyYW1zLnNldChcImFjdGlvblR5cGVcIiwgY29uZmlnLmFjdGlvblR5cGUpO1xuICBxdWVyeVBhcmFtcy5zZXQoXCJzbHVnXCIsIGNvbmZpZy5zbHVnKTtcbiAgdXJsLnNlYXJjaCA9IHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCk7XG4gIHJldHVybiB1cmw7XG59O1xudmFyIGNyZWF0ZVVUUmVwb3J0ZXIgPSAoY2ZnKSA9PiB7XG4gIHJldHVybiBhc3luYyAodHlwZSwgcGF5bG9hZCkgPT4ge1xuICAgIGNvbnN0IHVybCA9IGNyZWF0ZUFQSVJlcXVlc3RVcmwoe1xuICAgICAgdXJsOiBjZmcudXJsLFxuICAgICAgc2x1ZzogY2ZnLmVuZHBvaW50LFxuICAgICAgYWN0aW9uVHlwZTogdHlwZVxuICAgIH0pO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cbiAgICB9KTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJmYWlsdXJlXCI6IHtcbiAgICAgICAgY29uc3QgcCA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IG1heWJlUGFyc2VSZXNwb25zZVhNTChwLnMzRXJyb3IgPz8gXCJcIik7XG4gICAgICAgIGlmIChwYXJzZWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcnNlZC5tZXNzYWdlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogcGFyc2VkLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBwYXJzZWQubWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byB1cGxvYWQgZmlsZSAke3AuZmlsZU5hbWV9IHRvIFMzYCxcbiAgICAgICAgICAgIGNhdXNlOiBwLnMzRXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2Uub2s7XG4gIH07XG59O1xuXG4vLyBzcmMvaW50ZXJuYWwvY29tcG9uZW50LXRoZW1pbmcudHNcbmltcG9ydCB7IG9iamVjdEtleXMgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xudmFyIGdlbmVyYXRlUGVybWl0dGVkRmlsZVR5cGVzID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmaWxlVHlwZXMgPSBjb25maWcgPyBvYmplY3RLZXlzKGNvbmZpZykgOiBbXTtcbiAgY29uc3QgbWF4RmlsZUNvdW50ID0gY29uZmlnID8gT2JqZWN0LnZhbHVlcyhjb25maWcpLm1hcCgodikgPT4gdi5tYXhGaWxlQ291bnQpIDogW107XG4gIHJldHVybiB7IGZpbGVUeXBlcywgbXVsdGlwbGU6IG1heEZpbGVDb3VudC5zb21lKCh2KSA9PiB2ICYmIHYgPiAxKSB9O1xufTtcbnZhciBjYXBpdGFsaXplU3RhcnQgPSAoc3RyKSA9PiB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59O1xudmFyIElOVEVSTkFMX2RvRm9ybWF0dGluZyA9IChjb25maWcpID0+IHtcbiAgaWYgKCFjb25maWcpXG4gICAgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IGFsbG93ZWRUeXBlcyA9IG9iamVjdEtleXMoY29uZmlnKTtcbiAgY29uc3QgZm9ybWF0dGVkVHlwZXMgPSBhbGxvd2VkVHlwZXMubWFwKChmKSA9PiBmID09PSBcImJsb2JcIiA/IFwiZmlsZVwiIDogZik7XG4gIGlmIChmb3JtYXR0ZWRUeXBlcy5sZW5ndGggPiAxKSB7XG4gICAgY29uc3QgbGFzdFR5cGUgPSBmb3JtYXR0ZWRUeXBlcy5wb3AoKTtcbiAgICByZXR1cm4gYCR7Zm9ybWF0dGVkVHlwZXMuam9pbihcInMsIFwiKX0gYW5kICR7bGFzdFR5cGV9c2A7XG4gIH1cbiAgY29uc3Qga2V5ID0gYWxsb3dlZFR5cGVzWzBdO1xuICBjb25zdCBmb3JtYXR0ZWRLZXkgPSBmb3JtYXR0ZWRUeXBlc1swXTtcbiAgY29uc3QgeyBtYXhGaWxlU2l6ZSwgbWF4RmlsZUNvdW50IH0gPSBjb25maWdba2V5XTtcbiAgaWYgKG1heEZpbGVDb3VudCAmJiBtYXhGaWxlQ291bnQgPiAxKSB7XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZEtleX1zIHVwIHRvICR7bWF4RmlsZVNpemV9LCBtYXggJHttYXhGaWxlQ291bnR9YDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYCR7Zm9ybWF0dGVkS2V5fSAoJHttYXhGaWxlU2l6ZX0pYDtcbiAgfVxufTtcbnZhciBhbGxvd2VkQ29udGVudFRleHRMYWJlbEdlbmVyYXRvciA9IChjb25maWcpID0+IHtcbiAgcmV0dXJuIGNhcGl0YWxpemVTdGFydChJTlRFUk5BTF9kb0Zvcm1hdHRpbmcoY29uZmlnKSk7XG59O1xudmFyIHN0eWxlRmllbGRUb0NsYXNzTmFtZSA9IChzdHlsZUZpZWxkLCBhcmdzKSA9PiB7XG4gIGlmICh0eXBlb2Ygc3R5bGVGaWVsZCA9PT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gc3R5bGVGaWVsZDtcbiAgaWYgKHR5cGVvZiBzdHlsZUZpZWxkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCByZXN1bHQgPSBzdHlsZUZpZWxkKGFyZ3MpO1xuICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn07XG52YXIgc3R5bGVGaWVsZFRvQ3NzT2JqZWN0ID0gKHN0eWxlRmllbGQsIGFyZ3MpID0+IHtcbiAgaWYgKHR5cGVvZiBzdHlsZUZpZWxkID09PSBcIm9iamVjdFwiKVxuICAgIHJldHVybiBzdHlsZUZpZWxkO1xuICBpZiAodHlwZW9mIHN0eWxlRmllbGQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHN0eWxlRmllbGQoYXJncyk7XG4gICAgaWYgKHR5cGVvZiByZXN1bHQgPT09IFwib2JqZWN0XCIpXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHJldHVybiB7fTtcbn07XG52YXIgY29udGVudEZpZWxkVG9Db250ZW50ID0gKGNvbnRlbnRGaWVsZCwgYXJnKSA9PiB7XG4gIGlmICghY29udGVudEZpZWxkKVxuICAgIHJldHVybiBudWxsO1xuICBpZiAodHlwZW9mIGNvbnRlbnRGaWVsZCAhPT0gXCJmdW5jdGlvblwiKVxuICAgIHJldHVybiBjb250ZW50RmllbGQ7XG4gIGlmICh0eXBlb2YgY29udGVudEZpZWxkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCByZXN1bHQgPSBjb250ZW50RmllbGQoYXJnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuXG4vLyBzcmMvY2xpZW50LnRzXG52YXIgSU5URVJOQUxfRE9fTk9UX1VTRV9fZmF0YWxDbGllbnRFcnJvciA9IChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICBjb2RlOiBcIklOVEVSTkFMX0NMSUVOVF9FUlJPUlwiLFxuICBtZXNzYWdlOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgcmVwb3J0IHRoaXMgdG8gVXBsb2FkVGhpbmcuXCIsXG4gIGNhdXNlOiBlXG59KTtcbnZhciBEQU5HRVJPVVNfX3VwbG9hZEZpbGVzID0gYXN5bmMgKGVuZHBvaW50LCBvcHRzKSA9PiB7XG4gIGNvbnN0IHJlcG9ydEV2ZW50VG9VVCA9IGNyZWF0ZVVUUmVwb3J0ZXIoe1xuICAgIGVuZHBvaW50OiBTdHJpbmcoZW5kcG9pbnQpLFxuICAgIHVybDogb3B0cy51cmxcbiAgfSk7XG4gIGNvbnN0IHMzQ29ubmVjdGlvblJlcyA9IGF3YWl0IGZldGNoKFxuICAgIGNyZWF0ZUFQSVJlcXVlc3RVcmwoe1xuICAgICAgdXJsOiBvcHRzLnVybCxcbiAgICAgIHNsdWc6IFN0cmluZyhlbmRwb2ludCksXG4gICAgICBhY3Rpb25UeXBlOiBcInVwbG9hZFwiXG4gICAgfSksXG4gICAge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaW5wdXQ6IFwiaW5wdXRcIiBpbiBvcHRzID8gb3B0cy5pbnB1dCA6IG51bGwsXG4gICAgICAgIGZpbGVzOiBvcHRzLmZpbGVzLm1hcCgoZikgPT4gKHsgbmFtZTogZi5uYW1lLCBzaXplOiBmLnNpemUgfSkpXG4gICAgICB9KSxcbiAgICAgIC8vIEV4cHJlc3MgcmVxdWlyZXMgQ29udGVudC1UeXBlIHRvIGJlIGV4cGxpY2l0bHkgc2V0IHRvIHBhcnNlIGJvZHkgcHJvcGVybHlcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH1cbiAgICB9XG4gICkudGhlbihhc3luYyAocmVzKSA9PiB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgVXBsb2FkVGhpbmdFcnJvcjIuZnJvbVJlc3BvbnNlKHJlcyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3QganNvbk9yRXJyb3IgPSBhd2FpdCBzYWZlUGFyc2VKU09OKHJlcyk7XG4gICAgaWYgKGpzb25PckVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZToganNvbk9yRXJyb3IubWVzc2FnZSxcbiAgICAgICAgY2F1c2U6IHJlc1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBqc29uT3JFcnJvcjtcbiAgfSk7XG4gIGlmICghczNDb25uZWN0aW9uUmVzIHx8ICFBcnJheS5pc0FycmF5KHMzQ29ubmVjdGlvblJlcykpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgbWVzc2FnZTogXCJObyBVUkwuIEhvdyBkaWQgeW91IGV2ZW4gZ2V0IGhlcmU/XCIsXG4gICAgICBjYXVzZTogczNDb25uZWN0aW9uUmVzXG4gICAgfSk7XG4gIH1cbiAgY29uc3QgZmlsZVVwbG9hZFByb21pc2VzID0gczNDb25uZWN0aW9uUmVzLm1hcChhc3luYyAocHJlc2lnbmVkKSA9PiB7XG4gICAgY29uc3QgZmlsZSA9IG9wdHMuZmlsZXMuZmluZCgoZikgPT4gZi5uYW1lID09PSBwcmVzaWduZWQuZmlsZU5hbWUpO1xuICAgIGlmICghZmlsZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIk5vIGZpbGUgZm91bmQgZm9yIHByZXNpZ25lZCBVUkxcIiwgcHJlc2lnbmVkKTtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm8gZmlsZSBmb3VuZCBmb3IgcHJlc2lnbmVkIFVSTFwiLFxuICAgICAgICBjYXVzZTogYEV4cGVjdGVkIGZpbGUgd2l0aCBuYW1lICR7cHJlc2lnbmVkLmZpbGVOYW1lfSBidXQgZ290ICcke29wdHMuZmlsZXMuam9pbihcIixcIil9J2BcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBwcmVzaWduZWRVcmxzLFxuICAgICAgdXBsb2FkSWQsXG4gICAgICBjaHVua1NpemUsXG4gICAgICBjb250ZW50RGlzcG9zaXRpb24sXG4gICAgICBrZXksXG4gICAgICBwb2xsaW5nVXJsLFxuICAgICAgcG9sbGluZ0p3dFxuICAgIH0gPSBwcmVzaWduZWQ7XG4gICAgbGV0IHVwbG9hZGVkQnl0ZXMgPSAwO1xuICAgIGxldCBldGFncztcbiAgICB0cnkge1xuICAgICAgZXRhZ3MgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcHJlc2lnbmVkVXJscy5tYXAoYXN5bmMgKHVybCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBvZmZzZXQgPSBjaHVua1NpemUgKiBpbmRleDtcbiAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihvZmZzZXQgKyBjaHVua1NpemUsIGZpbGUuc2l6ZSk7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBmaWxlLnNsaWNlKG9mZnNldCwgZW5kKTtcbiAgICAgICAgICBjb25zdCBldGFnID0gYXdhaXQgdXBsb2FkUGFydFdpdGhQcm9ncmVzcyh7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBjaHVuayxcbiAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgIGZpbGVUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgbWF4UmV0cmllczogMTAsXG4gICAgICAgICAgICBvblByb2dyZXNzOiAoZGVsdGEpID0+IHtcbiAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICB1cGxvYWRlZEJ5dGVzICs9IGRlbHRhO1xuICAgICAgICAgICAgICBjb25zdCBwZXJjZW50ID0gdXBsb2FkZWRCeXRlcyAvIGZpbGUuc2l6ZSAqIDEwMDtcbiAgICAgICAgICAgICAgKF9hID0gb3B0cy5vblVwbG9hZFByb2dyZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChvcHRzLCB7IGZpbGU6IGZpbGUubmFtZSwgcHJvZ3Jlc3M6IHBlcmNlbnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHsgdGFnOiBldGFnLCBwYXJ0TnVtYmVyOiBpbmRleCArIDEgfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHJlcG9ydEV2ZW50VG9VVChcImZhaWx1cmVcIiwge1xuICAgICAgICBmaWxlS2V5OiBrZXksXG4gICAgICAgIHVwbG9hZElkLFxuICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBzM0Vycm9yOiBlcnJvci50b1N0cmluZygpXG4gICAgICB9KTtcbiAgICAgIHRocm93IFwidW5yZWFjaGFibGVcIjtcbiAgICB9XG4gICAgY29uc3QgdXBsb2FkT2sgPSBhd2FpdCByZXBvcnRFdmVudFRvVVQoXCJtdWx0aXBhcnQtY29tcGxldGVcIiwge1xuICAgICAgdXBsb2FkSWQsXG4gICAgICBmaWxlS2V5OiBrZXksXG4gICAgICBldGFnc1xuICAgIH0pO1xuICAgIGlmICghdXBsb2FkT2spIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIGFsZXJ0IFVUIG9mIHVwbG9hZCBjb21wbGV0aW9uXCIpO1xuICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGFsZXJ0IFVUIG9mIHVwbG9hZCBjb21wbGV0aW9uXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCA3NTApKTtcbiAgICBjb25zdCBzZXJ2ZXJEYXRhID0gYXdhaXQgd2l0aEV4cG9uZW50aWFsQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChwb2xsaW5nVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogcG9sbGluZ0p3dCB9XG4gICAgICB9KS50aGVuKChyKSA9PiByLmpzb24oKSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyA9PT0gXCJkb25lXCIgPyByZXMuY2FsbGJhY2tEYXRhIDogdm9pZCAwO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICBrZXk6IHByZXNpZ25lZC5rZXksXG4gICAgICBzZXJ2ZXJEYXRhLFxuICAgICAgdXJsOiBcImh0dHBzOi8vdXRmcy5pby9mL1wiICsga2V5XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBQcm9taXNlLmFsbChmaWxlVXBsb2FkUHJvbWlzZXMpO1xufTtcbnZhciBnZW5VcGxvYWRlciA9IChpbml0T3B0cykgPT4ge1xuICBjb25zdCB1cmwgPSAoaW5pdE9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGluaXRPcHRzLnVybCkgaW5zdGFuY2VvZiBVUkwgPyBpbml0T3B0cy51cmwgOiBnZXRGdWxsQXBpVXJsKGluaXRPcHRzID09IG51bGwgPyB2b2lkIDAgOiBpbml0T3B0cy51cmwpO1xuICByZXR1cm4gKGVuZHBvaW50LCBvcHRzKSA9PiAoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICBEQU5HRVJPVVNfX3VwbG9hZEZpbGVzKGVuZHBvaW50LCB7XG4gICAgICAuLi5vcHRzLFxuICAgICAgdXJsXG4gICAgfSlcbiAgKTtcbn07XG52YXIgY2xhc3NOYW1lcyA9ICguLi5jbGFzc2VzKSA9PiB7XG4gIHJldHVybiBjbGFzc2VzLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbn07XG52YXIgZ2VuZXJhdGVNaW1lVHlwZXMgPSAoZmlsZVR5cGVzKSA9PiB7XG4gIGNvbnN0IGFjY2VwdGVkID0gZmlsZVR5cGVzLm1hcCgodHlwZSkgPT4ge1xuICAgIGlmICh0eXBlID09PSBcImJsb2JcIilcbiAgICAgIHJldHVybiBcImJsb2JcIjtcbiAgICBpZiAodHlwZSA9PT0gXCJwZGZcIilcbiAgICAgIHJldHVybiBcImFwcGxpY2F0aW9uL3BkZlwiO1xuICAgIGlmICh0eXBlLmluY2x1ZGVzKFwiL1wiKSlcbiAgICAgIHJldHVybiB0eXBlO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBgJHt0eXBlfS8qYDtcbiAgfSk7XG4gIGlmIChhY2NlcHRlZC5pbmNsdWRlcyhcImJsb2JcIikpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIHJldHVybiBhY2NlcHRlZDtcbn07XG52YXIgZ2VuZXJhdGVDbGllbnREcm9wem9uZUFjY2VwdCA9IChmaWxlVHlwZXMpID0+IHtcbiAgY29uc3QgbWltZVR5cGVzID0gZ2VuZXJhdGVNaW1lVHlwZXMoZmlsZVR5cGVzKTtcbiAgaWYgKCFtaW1lVHlwZXMpXG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhtaW1lVHlwZXMubWFwKCh0eXBlKSA9PiBbdHlwZSwgW11dKSk7XG59O1xuZXhwb3J0IHtcbiAgREFOR0VST1VTX191cGxvYWRGaWxlcyxcbiAgSU5URVJOQUxfRE9fTk9UX1VTRV9fZmF0YWxDbGllbnRFcnJvcixcbiAgSU5URVJOQUxfZG9Gb3JtYXR0aW5nLFxuICBhbGxvd2VkQ29udGVudFRleHRMYWJlbEdlbmVyYXRvcixcbiAgY2FwaXRhbGl6ZVN0YXJ0LFxuICBjbGFzc05hbWVzLFxuICBjb250ZW50RmllbGRUb0NvbnRlbnQsXG4gIGdlblVwbG9hZGVyLFxuICBnZW5lcmF0ZUNsaWVudERyb3B6b25lQWNjZXB0LFxuICBnZW5lcmF0ZU1pbWVUeXBlcyxcbiAgZ2VuZXJhdGVQZXJtaXR0ZWRGaWxlVHlwZXMsXG4gIGdldEZ1bGxBcGlVcmwsXG4gIHN0eWxlRmllbGRUb0NsYXNzTmFtZSxcbiAgc3R5bGVGaWVsZFRvQ3NzT2JqZWN0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOlsibWF5YmVQYXJzZVJlc3BvbnNlWE1MIiwidXBsb2FkUGFydFdpdGhQcm9ncmVzcyIsImdldEZ1bGxBcGlVcmwiLCJzYWZlUGFyc2VKU09OIiwiVXBsb2FkVGhpbmdFcnJvciIsIlVwbG9hZFRoaW5nRXJyb3IyIiwid2l0aEV4cG9uZW50aWFsQmFja29mZiIsImNyZWF0ZUFQSVJlcXVlc3RVcmwiLCJjb25maWciLCJ1cmwiLCJVUkwiLCJxdWVyeVBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaCIsInNldCIsImFjdGlvblR5cGUiLCJzbHVnIiwidG9TdHJpbmciLCJjcmVhdGVVVFJlcG9ydGVyIiwiY2ZnIiwidHlwZSIsInBheWxvYWQiLCJlbmRwb2ludCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJwIiwicGFyc2VkIiwiczNFcnJvciIsIm1lc3NhZ2UiLCJjb2RlIiwiZmlsZU5hbWUiLCJjYXVzZSIsIm9rIiwib2JqZWN0S2V5cyIsImdlbmVyYXRlUGVybWl0dGVkRmlsZVR5cGVzIiwiZmlsZVR5cGVzIiwibWF4RmlsZUNvdW50IiwiT2JqZWN0IiwidmFsdWVzIiwibWFwIiwidiIsIm11bHRpcGxlIiwic29tZSIsImNhcGl0YWxpemVTdGFydCIsInN0ciIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJJTlRFUk5BTF9kb0Zvcm1hdHRpbmciLCJhbGxvd2VkVHlwZXMiLCJmb3JtYXR0ZWRUeXBlcyIsImYiLCJsZW5ndGgiLCJsYXN0VHlwZSIsInBvcCIsImpvaW4iLCJrZXkiLCJmb3JtYXR0ZWRLZXkiLCJtYXhGaWxlU2l6ZSIsImFsbG93ZWRDb250ZW50VGV4dExhYmVsR2VuZXJhdG9yIiwic3R5bGVGaWVsZFRvQ2xhc3NOYW1lIiwic3R5bGVGaWVsZCIsImFyZ3MiLCJyZXN1bHQiLCJzdHlsZUZpZWxkVG9Dc3NPYmplY3QiLCJjb250ZW50RmllbGRUb0NvbnRlbnQiLCJjb250ZW50RmllbGQiLCJhcmciLCJJTlRFUk5BTF9ET19OT1RfVVNFX19mYXRhbENsaWVudEVycm9yIiwiZSIsIkRBTkdFUk9VU19fdXBsb2FkRmlsZXMiLCJvcHRzIiwicmVwb3J0RXZlbnRUb1VUIiwiU3RyaW5nIiwiczNDb25uZWN0aW9uUmVzIiwiaW5wdXQiLCJmaWxlcyIsIm5hbWUiLCJzaXplIiwidGhlbiIsInJlcyIsImVycm9yIiwiZnJvbVJlc3BvbnNlIiwianNvbk9yRXJyb3IiLCJFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsImZpbGVVcGxvYWRQcm9taXNlcyIsInByZXNpZ25lZCIsImZpbGUiLCJmaW5kIiwiY29uc29sZSIsInByZXNpZ25lZFVybHMiLCJ1cGxvYWRJZCIsImNodW5rU2l6ZSIsImNvbnRlbnREaXNwb3NpdGlvbiIsInBvbGxpbmdVcmwiLCJwb2xsaW5nSnd0IiwidXBsb2FkZWRCeXRlcyIsImV0YWdzIiwiUHJvbWlzZSIsImFsbCIsImluZGV4Iiwib2Zmc2V0IiwiZW5kIiwiTWF0aCIsIm1pbiIsImNodW5rIiwiZXRhZyIsImZpbGVUeXBlIiwibWF4UmV0cmllcyIsIm9uUHJvZ3Jlc3MiLCJkZWx0YSIsIl9hIiwicGVyY2VudCIsIm9uVXBsb2FkUHJvZ3Jlc3MiLCJjYWxsIiwicHJvZ3Jlc3MiLCJ0YWciLCJwYXJ0TnVtYmVyIiwiZmlsZUtleSIsInVwbG9hZE9rIiwibG9nIiwiciIsInNldFRpbWVvdXQiLCJzZXJ2ZXJEYXRhIiwiYXV0aG9yaXphdGlvbiIsImpzb24iLCJzdGF0dXMiLCJjYWxsYmFja0RhdGEiLCJnZW5VcGxvYWRlciIsImluaXRPcHRzIiwiY2xhc3NOYW1lcyIsImNsYXNzZXMiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZ2VuZXJhdGVNaW1lVHlwZXMiLCJhY2NlcHRlZCIsImluY2x1ZGVzIiwiZ2VuZXJhdGVDbGllbnREcm9wem9uZUFjY2VwdCIsIm1pbWVUeXBlcyIsImZyb21FbnRyaWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFullApiUrl: () => (/* binding */ getFullApiUrl)\n/* harmony export */ });\n// src/internal/get-full-api-url.ts\nfunction getFullApiUrl(maybeUrl) {\n    const base = (()=>{\n        var _a, _b;\n        if (false) {}\n        if (typeof process !== \"undefined\" && ((_a = process == null ? void 0 : process.env) == null ? void 0 : _a.VERCEL_URL)) {\n            return `https://${process.env.VERCEL_URL}`;\n        }\n        if ((_b = /* unsupported import.meta.env */ undefined) == null ? void 0 : _b.VERCEL_URL) {\n            return `https://${/* unsupported import.meta.env.VERCEL_URL */ undefined.VERCEL_URL}`;\n        }\n        return \"http://localhost:3000\";\n    })();\n    try {\n        const url = new URL(maybeUrl ?? \"/api/uploadthing\", base);\n        if (url.pathname === \"/\") {\n            url.pathname = \"/api/uploadthing\";\n        }\n        return url;\n    } catch (err) {\n        throw new Error(`Failed to parse '${maybeUrl}' as a URL. Make sure it's a valid URL or path`);\n    }\n}\n //# sourceMappingURL=chunk-4PDGVH57.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UERHVkg1Ny5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG1DQUFtQztBQUNuQyxTQUFTQSxjQUFjQyxRQUFRO0lBQzdCLE1BQU1DLE9BQU8sQ0FBQztRQUNaLElBQUlDLElBQUlDO1FBQ1IsSUFBSSxLQUE2QixFQUFFLEVBRWxDO1FBQ0QsSUFBSSxPQUFPSSxZQUFZLGVBQWdCLEVBQUNMLEtBQUtLLFdBQVcsT0FBTyxLQUFLLElBQUlBLFFBQVFDLEdBQUcsS0FBSyxPQUFPLEtBQUssSUFBSU4sR0FBR08sVUFBVSxHQUFHO1lBQ3RILE9BQU8sQ0FBQyxRQUFRLEVBQUVGLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUM7UUFDNUM7UUFDQSxJQUFJLENBQUNOLEtBQUssMkNBQWUsS0FBSyxPQUFPLEtBQUssSUFBSUEsR0FBR00sVUFBVSxFQUFFO1lBQzNELE9BQU8sQ0FBQyxRQUFRLEVBQUUsaUVBQTBCLENBQUMsQ0FBQztRQUNoRDtRQUNBLE9BQU87SUFDVDtJQUNBLElBQUk7UUFDRixNQUFNQyxNQUFNLElBQUlDLElBQUlYLFlBQVksb0JBQW9CQztRQUNwRCxJQUFJUyxJQUFJRSxRQUFRLEtBQUssS0FBSztZQUN4QkYsSUFBSUUsUUFBUSxHQUFHO1FBQ2pCO1FBQ0EsT0FBT0Y7SUFDVCxFQUFFLE9BQU9HLEtBQUs7UUFDWixNQUFNLElBQUlDLE1BQ1IsQ0FBQyxpQkFBaUIsRUFBRWQsU0FBUyw4Q0FBOEMsQ0FBQztJQUVoRjtBQUNGO0FBSUUsQ0FDRiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ldmVudGx5Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvY2h1bmstNFBER1ZINTcubWpzPzI0ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVybmFsL2dldC1mdWxsLWFwaS11cmwudHNcbmZ1bmN0aW9uIGdldEZ1bGxBcGlVcmwobWF5YmVVcmwpIHtcbiAgY29uc3QgYmFzZSA9ICgoKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9hID0gcHJvY2VzcyA9PSBudWxsID8gdm9pZCAwIDogcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBfYS5WRVJDRUxfVVJMKSkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7cHJvY2Vzcy5lbnYuVkVSQ0VMX1VSTH1gO1xuICAgIH1cbiAgICBpZiAoKF9iID0gaW1wb3J0Lm1ldGEuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2IuVkVSQ0VMX1VSTCkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7aW1wb3J0Lm1ldGEuZW52LlZFUkNFTF9VUkx9YDtcbiAgICB9XG4gICAgcmV0dXJuIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG4gIH0pKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChtYXliZVVybCA/PyBcIi9hcGkvdXBsb2FkdGhpbmdcIiwgYmFzZSk7XG4gICAgaWYgKHVybC5wYXRobmFtZSA9PT0gXCIvXCIpIHtcbiAgICAgIHVybC5wYXRobmFtZSA9IFwiL2FwaS91cGxvYWR0aGluZ1wiO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIHBhcnNlICcke21heWJlVXJsfScgYXMgYSBVUkwuIE1ha2Ugc3VyZSBpdCdzIGEgdmFsaWQgVVJMIG9yIHBhdGhgXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBnZXRGdWxsQXBpVXJsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstNFBER1ZINTcubWpzLm1hcCJdLCJuYW1lcyI6WyJnZXRGdWxsQXBpVXJsIiwibWF5YmVVcmwiLCJiYXNlIiwiX2EiLCJfYiIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIlZFUkNFTF9VUkwiLCJ1cmwiLCJVUkwiLCJwYXRobmFtZSIsImVyciIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-CFWCJEOQ.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-CFWCJEOQ.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   createServerHandler: () => (/* binding */ createServerHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_WPSY3MFJ_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-WPSY3MFJ.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-WPSY3MFJ.mjs\");\n/* harmony import */ var _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-TX4EGJ4S.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-TX4EGJ4S.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n\n\n// src/server.ts\n\n// src/sdk/index.ts\n\n// src/sdk/utils.ts\n\nfunction guardServerOnly() {\n    if (false) {}\n}\nfunction getApiKeyOrThrow(apiKey) {\n    if (apiKey) return apiKey;\n    if (process.env.UPLOADTHING_SECRET) return process.env.UPLOADTHING_SECRET;\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n        code: \"MISSING_ENV\",\n        message: \"Missing `UPLOADTHING_SECRET` env variable.\"\n    });\n}\nvar uploadFilesInternal = async (data, opts)=>{\n    const fileData = data.files.map((file)=>({\n            name: file.name ?? \"unnamed-blob\",\n            type: file.type,\n            size: file.size\n        }));\n    const res = await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(\"/api/uploadFiles\"), {\n        method: \"POST\",\n        headers: opts.utRequestHeaders,\n        cache: \"no-store\",\n        body: JSON.stringify({\n            files: fileData,\n            metadata: data.metadata,\n            contentDisposition: data.contentDisposition\n        })\n    });\n    if (!res.ok) {\n        const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError.fromResponse(res);\n        throw error;\n    }\n    const clonedRes = res.clone();\n    const json = await res.json();\n    if (\"error\" in json) {\n        const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError.fromResponse(clonedRes);\n        throw error;\n    }\n    const uploads = await Promise.allSettled(data.files.map(async (file, i)=>{\n        const { presignedUrls, key, fileUrl, uploadId, chunkSize } = json.data[i];\n        if (!presignedUrls || !Array.isArray(presignedUrls)) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"URL_GENERATION_FAILED\",\n                message: \"Failed to generate presigned URL\",\n                cause: JSON.stringify(json.data[i])\n            });\n        }\n        const etags = await Promise.all(presignedUrls.map(async (url, index)=>{\n            const offset = chunkSize * index;\n            const end = Math.min(offset + chunkSize, file.size);\n            const chunk = file.slice(offset, end);\n            const etag = await (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadPart)({\n                fetch: opts.fetch,\n                url,\n                chunk,\n                contentDisposition: data.contentDisposition,\n                contentType: file.type,\n                fileName: file.name,\n                maxRetries: 10,\n                key,\n                utRequestHeaders: opts.utRequestHeaders\n            });\n            return {\n                tag: etag,\n                partNumber: index + 1\n            };\n        }));\n        await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(\"/api/completeMultipart\"), {\n            method: \"POST\",\n            body: JSON.stringify({\n                fileKey: key,\n                uploadId,\n                etags\n            }),\n            headers: opts.utRequestHeaders\n        });\n        await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.pollForFileData)({\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(`/api/pollUpload/${key}`),\n            apiKey: opts.utRequestHeaders[\"x-uploadthing-api-key\"],\n            sdkVersion: _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.UPLOADTHING_VERSION\n        });\n        return {\n            key,\n            url: fileUrl,\n            name: file.name,\n            size: file.size\n        };\n    }));\n    return uploads.map((upload)=>{\n        if (upload.status === \"fulfilled\") {\n            const data2 = upload.value;\n            return {\n                data: data2,\n                error: null\n            };\n        }\n        const reason = upload.reason;\n        const error = _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError.toObject(reason);\n        return {\n            data: null,\n            error\n        };\n    });\n};\n// src/sdk/index.ts\nvar UTApi = class {\n    constructor(opts){\n        this.fetch = (opts == null ? void 0 : opts.fetch) ?? globalThis.fetch;\n        this.apiKey = (opts == null ? void 0 : opts.apiKey) ?? process.env.UPLOADTHING_SECRET;\n        this.defaultHeaders = {\n            \"Content-Type\": \"application/json\",\n            \"x-uploadthing-api-key\": this.apiKey,\n            \"x-uploadthing-version\": _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.UPLOADTHING_VERSION\n        };\n        guardServerOnly();\n        getApiKeyOrThrow(this.apiKey);\n        (0,_chunk_WPSY3MFJ_mjs__WEBPACK_IMPORTED_MODULE_1__.incompatibleNodeGuard)();\n    }\n    async requestUploadThing(pathname, body, fallbackErrorMessage) {\n        const res = await this.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(pathname), {\n            method: \"POST\",\n            cache: \"no-store\",\n            headers: this.defaultHeaders,\n            body: JSON.stringify(body)\n        });\n        const json = await res.json();\n        if (!res.ok || \"error\" in json) {\n            console.error(\"[UT] Error:\", json);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"error\" in json && typeof json.error === \"string\" ? json.error : fallbackErrorMessage\n            });\n        }\n        return json;\n    }\n    /**\n   * @param {FileEsque | FileEsque[]} files The file(s) to upload\n   * @param {Json} metadata JSON-parseable metadata to attach to the uploaded file(s)\n   *\n   * @example\n   * await uploadFiles(new File([\"foo\"], \"foo.txt\"));\n   *\n   * @example\n   * await uploadFiles([\n   *   new File([\"foo\"], \"foo.txt\"),\n   *   new File([\"bar\"], \"bar.txt\"),\n   * ]);\n   */ async uploadFiles(files, opts) {\n        guardServerOnly();\n        const filesToUpload = Array.isArray(files) ? files : [\n            files\n        ];\n        const uploads = await uploadFilesInternal({\n            files: filesToUpload,\n            metadata: (opts == null ? void 0 : opts.metadata) ?? {},\n            contentDisposition: (opts == null ? void 0 : opts.contentDisposition) ?? \"inline\"\n        }, {\n            fetch: this.fetch,\n            utRequestHeaders: this.defaultHeaders\n        });\n        const uploadFileResponse = Array.isArray(files) ? uploads : uploads[0];\n        return uploadFileResponse;\n    }\n    /**\n   * @param {string} url The URL of the file to upload\n   * @param {Json} metadata JSON-parseable metadata to attach to the uploaded file(s)\n   *\n   * @example\n   * await uploadFileFromUrl(\"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await uploadFileFromUrl([\n   *   \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n   *   \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"\n   * ])\n   */ async uploadFilesFromUrl(urls, opts) {\n        guardServerOnly();\n        const fileUrls = Array.isArray(urls) ? urls : [\n            urls\n        ];\n        const formData = new FormData();\n        formData.append(\"metadata\", JSON.stringify((opts == null ? void 0 : opts.metadata) ?? {}));\n        const filesToUpload = await Promise.all(fileUrls.map(async (url)=>{\n            if (typeof url === \"string\") url = new URL(url);\n            const filename = url.pathname.split(\"/\").pop() ?? \"unknown-filename\";\n            const fileResponse = await fetch(url);\n            if (!fileResponse.ok) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Failed to download requested file.\",\n                    cause: fileResponse\n                });\n            }\n            const blob = await fileResponse.blob();\n            return Object.assign(blob, {\n                name: filename\n            });\n        }));\n        const uploads = await uploadFilesInternal({\n            files: filesToUpload,\n            metadata: (opts == null ? void 0 : opts.metadata) ?? {},\n            contentDisposition: (opts == null ? void 0 : opts.contentDisposition) ?? \"inline\"\n        }, {\n            fetch: this.fetch,\n            utRequestHeaders: this.defaultHeaders\n        });\n        const uploadFileResponse = Array.isArray(urls) ? uploads : uploads[0];\n        return uploadFileResponse;\n    }\n    /**\n   * Request to delete files from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   */ async deleteFiles(fileKeys) {\n        guardServerOnly();\n        if (!Array.isArray(fileKeys)) fileKeys = [\n            fileKeys\n        ];\n        return this.requestUploadThing(\"/api/deleteFile\", {\n            fileKeys\n        }, \"An unknown error occured while deleting files.\");\n    }\n    /**\n   * Request file URLs from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   * console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n   *\n   * @example\n   * const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   * console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n   */ async getFileUrls(fileKeys) {\n        guardServerOnly();\n        if (!Array.isArray(fileKeys)) fileKeys = [\n            fileKeys\n        ];\n        const json = await this.requestUploadThing(\"/api/getFileUrl\", {\n            fileKeys\n        }, \"An unknown error occured while retrieving file URLs.\");\n        return json.data;\n    }\n    /**\n   * Request file list from UploadThing storage.\n   *\n   * @example\n   * const data = await listFiles();\n   * console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n   */ async listFiles() {\n        guardServerOnly();\n        const json = await this.requestUploadThing(\"/api/listFiles\", {}, \"An unknown error occured while listing files.\");\n        return json.files;\n    }\n    async renameFile(updates) {\n        guardServerOnly();\n        if (!Array.isArray(updates)) updates = [\n            updates\n        ];\n        return this.requestUploadThing(\"/api/renameFile\", {\n            updates\n        }, \"An unknown error occured while renaming files.\");\n    }\n    async getUsageInfo() {\n        guardServerOnly();\n        return this.requestUploadThing(\"/api/getUsageInfo\", {}, \"An unknown error occured while getting usage info.\");\n    }\n};\n// src/server.ts\nvar createUploadthing = (opts)=>(0,_chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.createBuilder)(opts);\nvar createServerHandler = (opts)=>{\n    (0,_chunk_WPSY3MFJ_mjs__WEBPACK_IMPORTED_MODULE_1__.incompatibleNodeGuard)();\n    const requestHandler = (0,_chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.buildRequestHandler)(opts);\n    const POST = async (request)=>{\n        const req = request instanceof Request ? request : request.request;\n        const response = await requestHandler({\n            req\n        });\n        if (response instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError) {\n            return new Response(JSON.stringify((0,_chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.formatError)(response, opts.router)), {\n                status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.getStatusCodeFromError)(response),\n                headers: {\n                    \"x-uploadthing-version\": _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.UPLOADTHING_VERSION\n                }\n            });\n        }\n        if (response.status !== 200) {\n            return new Response(\"An unknown error occured\", {\n                status: 500,\n                headers: {\n                    \"x-uploadthing-version\": _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.UPLOADTHING_VERSION\n                }\n            });\n        }\n        return new Response(JSON.stringify(response.body), {\n            status: response.status,\n            headers: {\n                \"x-uploadthing-version\": _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.UPLOADTHING_VERSION\n            }\n        });\n    };\n    const getBuildPerms = (0,_chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.buildPermissionsInfoHandler)(opts);\n    const GET = (request)=>{\n        const _req = request instanceof Request ? request : request.request;\n        return new Response(JSON.stringify(getBuildPerms()), {\n            status: 200,\n            headers: {\n                \"x-uploadthing-version\": _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.UPLOADTHING_VERSION\n            }\n        });\n    };\n    return {\n        GET,\n        POST\n    };\n};\nvar extractRouterConfig = (router)=>(0,_chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_2__.buildPermissionsInfoHandler)({\n        router\n    })();\n //# sourceMappingURL=chunk-CFWCJEOQ.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1DRldDSkVPUS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFOEI7QUFHQTtBQU9BO0FBRTlCLGdCQUFnQjtBQUNvRjtBQUVwRyxtQkFBbUI7QUFDNEc7QUFFL0gsbUJBQW1CO0FBS1U7QUFDN0IsU0FBU2M7SUFDUCxJQUFJLEtBQTZCLEVBQUUsRUFLbEM7QUFDSDtBQUNBLFNBQVNHLGlCQUFpQkMsTUFBTTtJQUM5QixJQUFJQSxRQUNGLE9BQU9BO0lBQ1QsSUFBSUMsUUFBUUMsR0FBRyxDQUFDQyxrQkFBa0IsRUFDaEMsT0FBT0YsUUFBUUMsR0FBRyxDQUFDQyxrQkFBa0I7SUFDdkMsTUFBTSxJQUFJYixpRUFBZ0JBLENBQUM7UUFDekJPLE1BQU07UUFDTkMsU0FBUztJQUNYO0FBQ0Y7QUFDQSxJQUFJTSxzQkFBc0IsT0FBT0MsTUFBTUM7SUFDckMsTUFBTUMsV0FBV0YsS0FBS0csS0FBSyxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsT0FBVTtZQUN6Q0MsTUFBTUQsS0FBS0MsSUFBSSxJQUFJO1lBQ25CQyxNQUFNRixLQUFLRSxJQUFJO1lBQ2ZDLE1BQU1ILEtBQUtHLElBQUk7UUFDakI7SUFDQSxNQUFNQyxNQUFNLE1BQU1SLEtBQUtTLEtBQUssQ0FBQ3ZCLDJFQUFzQkEsQ0FBQyxxQkFBcUI7UUFDdkV3QixRQUFRO1FBQ1JDLFNBQVNYLEtBQUtZLGdCQUFnQjtRQUM5QkMsT0FBTztRQUNQQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7WUFDbkJkLE9BQU9EO1lBQ1BnQixVQUFVbEIsS0FBS2tCLFFBQVE7WUFDdkJDLG9CQUFvQm5CLEtBQUttQixrQkFBa0I7UUFDN0M7SUFDRjtJQUNBLElBQUksQ0FBQ1YsSUFBSVcsRUFBRSxFQUFFO1FBQ1gsTUFBTUMsUUFBUSxNQUFNcEMsaUVBQWdCQSxDQUFDcUMsWUFBWSxDQUFDYjtRQUNsRCxNQUFNWTtJQUNSO0lBQ0EsTUFBTUUsWUFBWWQs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QW1CQTtZQUM5QztRQUNGO0lBQ0Y7SUFDQSxNQUFNNkgsZ0JBQWdCNUgsZ0ZBQTJCQSxDQUFDcUI7SUFDbEQsTUFBTXdHLE1BQU0sQ0FBQ1A7UUFDWCxNQUFNUSxPQUFPUixtQkFBbUJFLFVBQVVGLFVBQVVBLFFBQVFBLE9BQU87UUFDbkUsT0FBTyxJQUFJSSxTQUFTdEYsS0FBS0MsU0FBUyxDQUFDdUYsa0JBQWtCO1lBQ25EL0MsUUFBUTtZQUNSN0MsU0FBUztnQkFDUCx5QkFBeUJqQyxvRUFBbUJBO1lBQzlDO1FBQ0Y7SUFDRjtJQUNBLE9BQU87UUFBRThIO1FBQUtSO0lBQUs7QUFDckI7QUFDQSxJQUFJVSxzQkFBc0IsQ0FBQ0osU0FBVzNILGdGQUEyQkEsQ0FBQztRQUFFMkg7SUFBTztBQU96RSxDQUNGLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V2ZW50bHkvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1DRldDSkVPUS5tanM/Yzc5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB1cGxvYWRQYXJ0XG59IGZyb20gXCIuL2NodW5rLVMzUjNWWFJLLm1qc1wiO1xuaW1wb3J0IHtcbiAgaW5jb21wYXRpYmxlTm9kZUd1YXJkXG59IGZyb20gXCIuL2NodW5rLVdQU1kzTUZKLm1qc1wiO1xuaW1wb3J0IHtcbiAgVVBMT0FEVEhJTkdfVkVSU0lPTixcbiAgYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyLFxuICBidWlsZFJlcXVlc3RIYW5kbGVyLFxuICBjcmVhdGVCdWlsZGVyLFxuICBmb3JtYXRFcnJvclxufSBmcm9tIFwiLi9jaHVuay1UWDRFR0o0Uy5tanNcIjtcblxuLy8gc3JjL3NlcnZlci50c1xuaW1wb3J0IHsgZ2V0U3RhdHVzQ29kZUZyb21FcnJvciwgVXBsb2FkVGhpbmdFcnJvciBhcyBVcGxvYWRUaGluZ0Vycm9yMyB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5cbi8vIHNyYy9zZGsvaW5kZXgudHNcbmltcG9ydCB7IGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwgYXMgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIsIFVwbG9hZFRoaW5nRXJyb3IgYXMgVXBsb2FkVGhpbmdFcnJvcjIgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xuXG4vLyBzcmMvc2RrL3V0aWxzLnRzXG5pbXBvcnQge1xuICBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLFxuICBwb2xsRm9yRmlsZURhdGEsXG4gIFVwbG9hZFRoaW5nRXJyb3Jcbn0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmZ1bmN0aW9uIGd1YXJkU2VydmVyT25seSgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgbWVzc2FnZTogXCJUaGUgYHV0YXBpYCBjYW4gb25seSBiZSB1c2VkIG9uIHRoZSBzZXJ2ZXIuXCJcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0QXBpS2V5T3JUaHJvdyhhcGlLZXkpIHtcbiAgaWYgKGFwaUtleSlcbiAgICByZXR1cm4gYXBpS2V5O1xuICBpZiAocHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUKVxuICAgIHJldHVybiBwcm9jZXNzLmVudi5VUExPQURUSElOR19TRUNSRVQ7XG4gIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICBjb2RlOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgbWVzc2FnZTogXCJNaXNzaW5nIGBVUExPQURUSElOR19TRUNSRVRgIGVudiB2YXJpYWJsZS5cIlxuICB9KTtcbn1cbnZhciB1cGxvYWRGaWxlc0ludGVybmFsID0gYXN5bmMgKGRhdGEsIG9wdHMpID0+IHtcbiAgY29uc3QgZmlsZURhdGEgPSBkYXRhLmZpbGVzLm1hcCgoZmlsZSkgPT4gKHtcbiAgICBuYW1lOiBmaWxlLm5hbWUgPz8gXCJ1bm5hbWVkLWJsb2JcIixcbiAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgc2l6ZTogZmlsZS5zaXplXG4gIH0pKTtcbiAgY29uc3QgcmVzID0gYXdhaXQgb3B0cy5mZXRjaChnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKFwiL2FwaS91cGxvYWRGaWxlc1wiKSwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczogb3B0cy51dFJlcXVlc3RIZWFkZXJzLFxuICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZmlsZXM6IGZpbGVEYXRhLFxuICAgICAgbWV0YWRhdGE6IGRhdGEubWV0YWRhdGEsXG4gICAgICBjb250ZW50RGlzcG9zaXRpb246IGRhdGEuY29udGVudERpc3Bvc2l0aW9uXG4gICAgfSlcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgZXJyb3IgPSBhd2FpdCBVcGxvYWRUaGluZ0Vycm9yLmZyb21SZXNwb25zZShyZXMpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IGNsb25lZFJlcyA9IHJlcy5jbG9uZSgpO1xuICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgaWYgKFwiZXJyb3JcIiBpbiBqc29uKSB7XG4gICAgY29uc3QgZXJyb3IgPSBhd2FpdCBVcGxvYWRUaGluZ0Vycm9yLmZyb21SZXNwb25zZShjbG9uZWRSZXMpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IHVwbG9hZHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoXG4gICAgZGF0YS5maWxlcy5tYXAoYXN5bmMgKGZpbGUsIGkpID0+IHtcbiAgICAgIGNvbnN0IHsgcHJlc2lnbmVkVXJscywga2V5LCBmaWxlVXJsLCB1cGxvYWRJZCwgY2h1bmtTaXplIH0gPSBqc29uLmRhdGFbaV07XG4gICAgICBpZiAoIXByZXNpZ25lZFVybHMgfHwgIUFycmF5LmlzQXJyYXkocHJlc2lnbmVkVXJscykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6IFwiVVJMX0dFTkVSQVRJT05fRkFJTEVEXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcHJlc2lnbmVkIFVSTFwiLFxuICAgICAgICAgIGNhdXNlOiBKU09OLnN0cmluZ2lmeShqc29uLmRhdGFbaV0pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZXRhZ3MgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcHJlc2lnbmVkVXJscy5tYXAoYXN5bmMgKHVybCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBvZmZzZXQgPSBjaHVua1NpemUgKiBpbmRleDtcbiAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihvZmZzZXQgKyBjaHVua1NpemUsIGZpbGUuc2l6ZSk7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBmaWxlLnNsaWNlKG9mZnNldCwgZW5kKTtcbiAgICAgICAgICBjb25zdCBldGFnID0gYXdhaXQgdXBsb2FkUGFydCh7XG4gICAgICAgICAgICBmZXRjaDogb3B0cy5mZXRjaCxcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGNodW5rLFxuICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBkYXRhLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgbWF4UmV0cmllczogMTAsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB1dFJlcXVlc3RIZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4geyB0YWc6IGV0YWcsIHBhcnROdW1iZXI6IGluZGV4ICsgMSB9O1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGF3YWl0IG9wdHMuZmV0Y2goZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChcIi9hcGkvY29tcGxldGVNdWx0aXBhcnRcIiksIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAgICBldGFnc1xuICAgICAgICB9KSxcbiAgICAgICAgaGVhZGVyczogb3B0cy51dFJlcXVlc3RIZWFkZXJzXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHBvbGxGb3JGaWxlRGF0YSh7XG4gICAgICAgIHVybDogZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChgL2FwaS9wb2xsVXBsb2FkLyR7a2V5fWApLFxuICAgICAgICBhcGlLZXk6IG9wdHMudXRSZXF1ZXN0SGVhZGVyc1tcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiXSxcbiAgICAgICAgc2RrVmVyc2lvbjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXksXG4gICAgICAgIHVybDogZmlsZVVybCxcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBzaXplOiBmaWxlLnNpemVcbiAgICAgIH07XG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIHVwbG9hZHMubWFwKCh1cGxvYWQpID0+IHtcbiAgICBpZiAodXBsb2FkLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgICAgY29uc3QgZGF0YTIgPSB1cGxvYWQudmFsdWU7XG4gICAgICByZXR1cm4geyBkYXRhOiBkYXRhMiwgZXJyb3I6IG51bGwgfTtcbiAgICB9XG4gICAgY29uc3QgcmVhc29uID0gdXBsb2FkLnJlYXNvbjtcbiAgICBjb25zdCBlcnJvciA9IFVwbG9hZFRoaW5nRXJyb3IudG9PYmplY3QocmVhc29uKTtcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICB9KTtcbn07XG5cbi8vIHNyYy9zZGsvaW5kZXgudHNcbnZhciBVVEFwaSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHRoaXMuZmV0Y2ggPSAob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5mZXRjaCkgPz8gZ2xvYmFsVGhpcy5mZXRjaDtcbiAgICB0aGlzLmFwaUtleSA9IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmFwaUtleSkgPz8gcHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUO1xuICAgIHRoaXMuZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IHRoaXMuYXBpS2V5LFxuICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgIH07XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgZ2V0QXBpS2V5T3JUaHJvdyh0aGlzLmFwaUtleSk7XG4gICAgaW5jb21wYXRpYmxlTm9kZUd1YXJkKCk7XG4gIH1cbiAgYXN5bmMgcmVxdWVzdFVwbG9hZFRoaW5nKHBhdGhuYW1lLCBib2R5LCBmYWxsYmFja0Vycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuZmV0Y2goZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIocGF0aG5hbWUpLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuZGVmYXVsdEhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxuICAgIH0pO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIGlmICghcmVzLm9rIHx8IFwiZXJyb3JcIiBpbiBqc29uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW1VUXSBFcnJvcjpcIiwganNvbik7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICBtZXNzYWdlOiBcImVycm9yXCIgaW4ganNvbiAmJiB0eXBlb2YganNvbi5lcnJvciA9PT0gXCJzdHJpbmdcIiA/IGpzb24uZXJyb3IgOiBmYWxsYmFja0Vycm9yTWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBqc29uO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge0ZpbGVFc3F1ZSB8IEZpbGVFc3F1ZVtdfSBmaWxlcyBUaGUgZmlsZShzKSB0byB1cGxvYWRcbiAgICogQHBhcmFtIHtKc29ufSBtZXRhZGF0YSBKU09OLXBhcnNlYWJsZSBtZXRhZGF0YSB0byBhdHRhY2ggdG8gdGhlIHVwbG9hZGVkIGZpbGUocylcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgdXBsb2FkRmlsZXMobmV3IEZpbGUoW1wiZm9vXCJdLCBcImZvby50eHRcIikpO1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCB1cGxvYWRGaWxlcyhbXG4gICAqICAgbmV3IEZpbGUoW1wiZm9vXCJdLCBcImZvby50eHRcIiksXG4gICAqICAgbmV3IEZpbGUoW1wiYmFyXCJdLCBcImJhci50eHRcIiksXG4gICAqIF0pO1xuICAgKi9cbiAgYXN5bmMgdXBsb2FkRmlsZXMoZmlsZXMsIG9wdHMpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBjb25zdCBmaWxlc1RvVXBsb2FkID0gQXJyYXkuaXNBcnJheShmaWxlcykgPyBmaWxlcyA6IFtmaWxlc107XG4gICAgY29uc3QgdXBsb2FkcyA9IGF3YWl0IHVwbG9hZEZpbGVzSW50ZXJuYWwoXG4gICAgICB7XG4gICAgICAgIGZpbGVzOiBmaWxlc1RvVXBsb2FkLFxuICAgICAgICBtZXRhZGF0YTogKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMubWV0YWRhdGEpID8/IHt9LFxuICAgICAgICBjb250ZW50RGlzcG9zaXRpb246IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbikgPz8gXCJpbmxpbmVcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2gsXG4gICAgICAgIHV0UmVxdWVzdEhlYWRlcnM6IHRoaXMuZGVmYXVsdEhlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHVwbG9hZEZpbGVSZXNwb25zZSA9IEFycmF5LmlzQXJyYXkoZmlsZXMpID8gdXBsb2FkcyA6IHVwbG9hZHNbMF07XG4gICAgcmV0dXJuIHVwbG9hZEZpbGVSZXNwb25zZTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIG9mIHRoZSBmaWxlIHRvIHVwbG9hZFxuICAgKiBAcGFyYW0ge0pzb259IG1ldGFkYXRhIEpTT04tcGFyc2VhYmxlIG1ldGFkYXRhIHRvIGF0dGFjaCB0byB0aGUgdXBsb2FkZWQgZmlsZShzKVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCB1cGxvYWRGaWxlRnJvbVVybChcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgdXBsb2FkRmlsZUZyb21VcmwoW1xuICAgKiAgIFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8yZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXG4gICAqICAgXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJcbiAgICogXSlcbiAgICovXG4gIGFzeW5jIHVwbG9hZEZpbGVzRnJvbVVybCh1cmxzLCBvcHRzKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgY29uc3QgZmlsZVVybHMgPSBBcnJheS5pc0FycmF5KHVybHMpID8gdXJscyA6IFt1cmxzXTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm1EYXRhLmFwcGVuZChcIm1ldGFkYXRhXCIsIEpTT04uc3RyaW5naWZ5KChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLm1ldGFkYXRhKSA/PyB7fSkpO1xuICAgIGNvbnN0IGZpbGVzVG9VcGxvYWQgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIGZpbGVVcmxzLm1hcChhc3luYyAodXJsKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdXJsID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgIHVybCA9IG5ldyBVUkwodXJsKTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnBvcCgpID8/IFwidW5rbm93bi1maWxlbmFtZVwiO1xuICAgICAgICBjb25zdCBmaWxlUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgICBpZiAoIWZpbGVSZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBkb3dubG9hZCByZXF1ZXN0ZWQgZmlsZS5cIixcbiAgICAgICAgICAgIGNhdXNlOiBmaWxlUmVzcG9uc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgZmlsZVJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYmxvYiwgeyBuYW1lOiBmaWxlbmFtZSB9KTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICBjb25zdCB1cGxvYWRzID0gYXdhaXQgdXBsb2FkRmlsZXNJbnRlcm5hbChcbiAgICAgIHtcbiAgICAgICAgZmlsZXM6IGZpbGVzVG9VcGxvYWQsXG4gICAgICAgIG1ldGFkYXRhOiAob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5tZXRhZGF0YSkgPz8ge30sXG4gICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuY29udGVudERpc3Bvc2l0aW9uKSA/PyBcImlubGluZVwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmZXRjaDogdGhpcy5mZXRjaCxcbiAgICAgICAgdXRSZXF1ZXN0SGVhZGVyczogdGhpcy5kZWZhdWx0SGVhZGVyc1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgdXBsb2FkRmlsZVJlc3BvbnNlID0gQXJyYXkuaXNBcnJheSh1cmxzKSA/IHVwbG9hZHMgOiB1cGxvYWRzWzBdO1xuICAgIHJldHVybiB1cGxvYWRGaWxlUmVzcG9uc2U7XG4gIH1cbiAgLyoqXG4gICAqIFJlcXVlc3QgdG8gZGVsZXRlIGZpbGVzIGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBzdHJpbmdbXX0gZmlsZUtleXNcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgZGVsZXRlRmlsZXMoXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCBkZWxldGVGaWxlcyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcbiAgICovXG4gIGFzeW5jIGRlbGV0ZUZpbGVzKGZpbGVLZXlzKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGZpbGVLZXlzKSlcbiAgICAgIGZpbGVLZXlzID0gW2ZpbGVLZXlzXTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXG4gICAgICBcIi9hcGkvZGVsZXRlRmlsZVwiLFxuICAgICAgeyBmaWxlS2V5cyB9LFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQgd2hpbGUgZGVsZXRpbmcgZmlsZXMuXCJcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBSZXF1ZXN0IGZpbGUgVVJMcyBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG4gICAqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIn1dXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcbiAgICogY29uc29sZS5sb2coZGF0YSkgLy8gW3trZXk6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8yZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIgfSx7a2V5OiBcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJ9XVxuICAgKi9cbiAgYXN5bmMgZ2V0RmlsZVVybHMoZmlsZUtleXMpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsZUtleXMpKVxuICAgICAgZmlsZUtleXMgPSBbZmlsZUtleXNdO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCB0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcbiAgICAgIFwiL2FwaS9nZXRGaWxlVXJsXCIsXG4gICAgICB7IGZpbGVLZXlzIH0sXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJlZCB3aGlsZSByZXRyaWV2aW5nIGZpbGUgVVJMcy5cIlxuICAgICk7XG4gICAgcmV0dXJuIGpzb24uZGF0YTtcbiAgfVxuICAvKipcbiAgICogUmVxdWVzdCBmaWxlIGxpc3QgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgbGlzdEZpbGVzKCk7XG4gICAqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyB7IGtleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIGlkOiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOFwiIH1cbiAgICovXG4gIGFzeW5jIGxpc3RGaWxlcygpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvYXBpL2xpc3RGaWxlc1wiLCB7fSwgXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQgd2hpbGUgbGlzdGluZyBmaWxlcy5cIik7XG4gICAgcmV0dXJuIGpzb24uZmlsZXM7XG4gIH1cbiAgYXN5bmMgcmVuYW1lRmlsZSh1cGRhdGVzKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHVwZGF0ZXMpKVxuICAgICAgdXBkYXRlcyA9IFt1cGRhdGVzXTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXG4gICAgICBcIi9hcGkvcmVuYW1lRmlsZVwiLFxuICAgICAgeyB1cGRhdGVzIH0sXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJlZCB3aGlsZSByZW5hbWluZyBmaWxlcy5cIlxuICAgICk7XG4gIH1cbiAgYXN5bmMgZ2V0VXNhZ2VJbmZvKCkge1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcbiAgICAgIFwiL2FwaS9nZXRVc2FnZUluZm9cIixcbiAgICAgIHt9LFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQgd2hpbGUgZ2V0dGluZyB1c2FnZSBpbmZvLlwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL3NlcnZlci50c1xudmFyIGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpID0+IGNyZWF0ZUJ1aWxkZXIob3B0cyk7XG52YXIgY3JlYXRlU2VydmVySGFuZGxlciA9IChvcHRzKSA9PiB7XG4gIGluY29tcGF0aWJsZU5vZGVHdWFyZCgpO1xuICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IGJ1aWxkUmVxdWVzdEhhbmRsZXIob3B0cyk7XG4gIGNvbnN0IFBPU1QgPSBhc3luYyAocmVxdWVzdCkgPT4ge1xuICAgIGNvbnN0IHJlcSA9IHJlcXVlc3QgaW5zdGFuY2VvZiBSZXF1ZXN0ID8gcmVxdWVzdCA6IHJlcXVlc3QucmVxdWVzdDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RIYW5kbGVyKHsgcmVxIH0pO1xuICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIFVwbG9hZFRoaW5nRXJyb3IzKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KGZvcm1hdEVycm9yKHJlc3BvbnNlLCBvcHRzLnJvdXRlcikpLCB7XG4gICAgICAgIHN0YXR1czogZ2V0U3RhdHVzQ29kZUZyb21FcnJvcihyZXNwb25zZSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiBVUExPQURUSElOR19WRVJTSU9OXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWRcIiwge1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFVQTE9BRFRISU5HX1ZFUlNJT05cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuYm9keSksIHtcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiBVUExPQURUSElOR19WRVJTSU9OXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGdldEJ1aWxkUGVybXMgPSBidWlsZFBlcm1pc3Npb25zSW5mb0hhbmRsZXIob3B0cyk7XG4gIGNvbnN0IEdFVCA9IChyZXF1ZXN0KSA9PiB7XG4gICAgY29uc3QgX3JlcSA9IHJlcXVlc3QgaW5zdGFuY2VvZiBSZXF1ZXN0ID8gcmVxdWVzdCA6IHJlcXVlc3QucmVxdWVzdDtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KGdldEJ1aWxkUGVybXMoKSksIHtcbiAgICAgIHN0YXR1czogMjAwLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiBVUExPQURUSElOR19WRVJTSU9OXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiB7IEdFVCwgUE9TVCB9O1xufTtcbnZhciBleHRyYWN0Um91dGVyQ29uZmlnID0gKHJvdXRlcikgPT4gYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyKHsgcm91dGVyIH0pKCk7XG5cbmV4cG9ydCB7XG4gIFVUQXBpLFxuICBjcmVhdGVVcGxvYWR0aGluZyxcbiAgY3JlYXRlU2VydmVySGFuZGxlcixcbiAgZXh0cmFjdFJvdXRlckNvbmZpZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUNGV0NKRU9RLm1qcy5tYXAiXSwibmFtZXMiOlsidXBsb2FkUGFydCIsImluY29tcGF0aWJsZU5vZGVHdWFyZCIsIlVQTE9BRFRISU5HX1ZFUlNJT04iLCJidWlsZFBlcm1pc3Npb25zSW5mb0hhbmRsZXIiLCJidWlsZFJlcXVlc3RIYW5kbGVyIiwiY3JlYXRlQnVpbGRlciIsImZvcm1hdEVycm9yIiwiZ2V0U3RhdHVzQ29kZUZyb21FcnJvciIsIlVwbG9hZFRoaW5nRXJyb3IiLCJVcGxvYWRUaGluZ0Vycm9yMyIsImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwiLCJnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMMiIsIlVwbG9hZFRoaW5nRXJyb3IyIiwicG9sbEZvckZpbGVEYXRhIiwiZ3VhcmRTZXJ2ZXJPbmx5IiwiY29kZSIsIm1lc3NhZ2UiLCJnZXRBcGlLZXlPclRocm93IiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIlVQTE9BRFRISU5HX1NFQ1JFVCIsInVwbG9hZEZpbGVzSW50ZXJuYWwiLCJkYXRhIiwib3B0cyIsImZpbGVEYXRhIiwiZmlsZXMiLCJtYXAiLCJmaWxlIiwibmFtZSIsInR5cGUiLCJzaXplIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwidXRSZXF1ZXN0SGVhZGVycyIsImNhY2hlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZXRhZGF0YSIsImNvbnRlbnREaXNwb3NpdGlvbiIsIm9rIiwiZXJyb3IiLCJmcm9tUmVzcG9uc2UiLCJjbG9uZWRSZXMiLCJjbG9uZSIsImpzb24iLCJ1cGxvYWRzIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJpIiwicHJlc2lnbmVkVXJscyIsImtleSIsImZpbGVVcmwiLCJ1cGxvYWRJZCIsImNodW5rU2l6ZSIsIkFycmF5IiwiaXNBcnJheSIsImNhdXNlIiwiZXRhZ3MiLCJhbGwiLCJ1cmwiLCJpbmRleCIsIm9mZnNldCIsImVuZCIsIk1hdGgiLCJtaW4iLCJjaHVuayIsInNsaWNlIiwiZXRhZyIsImNvbnRlbnRUeXBlIiwiZmlsZU5hbWUiLCJtYXhSZXRyaWVzIiwidGFnIiwicGFydE51bWJlciIsImZpbGVLZXkiLCJzZGtWZXJzaW9uIiwidXBsb2FkIiwic3RhdHVzIiwiZGF0YTIiLCJ2YWx1ZSIsInJlYXNvbiIsInRvT2JqZWN0IiwiVVRBcGkiLCJjb25zdHJ1Y3RvciIsImdsb2JhbFRoaXMiLCJkZWZhdWx0SGVhZGVycyIsInJlcXVlc3RVcGxvYWRUaGluZyIsInBhdGhuYW1lIiwiZmFsbGJhY2tFcnJvck1lc3NhZ2UiLCJjb25zb2xlIiwidXBsb2FkRmlsZXMiLCJmaWxlc1RvVXBsb2FkIiwidXBsb2FkRmlsZVJlc3BvbnNlIiwidXBsb2FkRmlsZXNGcm9tVXJsIiwidXJscyIsImZpbGVVcmxzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsIlVSTCIsImZpbGVuYW1lIiwic3BsaXQiLCJwb3AiLCJmaWxlUmVzcG9uc2UiLCJibG9iIiwiT2JqZWN0IiwiYXNzaWduIiwiZGVsZXRlRmlsZXMiLCJmaWxlS2V5cyIsImdldEZpbGVVcmxzIiwibGlzdEZpbGVzIiwicmVuYW1lRmlsZSIsInVwZGF0ZXMiLCJnZXRVc2FnZUluZm8iLCJjcmVhdGVVcGxvYWR0aGluZyIsImNyZWF0ZVNlcnZlckhhbmRsZXIiLCJyZXF1ZXN0SGFuZGxlciIsIlBPU1QiLCJyZXF1ZXN0IiwicmVxIiwiUmVxdWVzdCIsInJlc3BvbnNlIiwiUmVzcG9uc2UiLCJyb3V0ZXIiLCJnZXRCdWlsZFBlcm1zIiwiR0VUIiwiX3JlcSIsImV4dHJhY3RSb3V0ZXJDb25maWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-CFWCJEOQ.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeParseResponseXML: () => (/* binding */ maybeParseResponseXML),\n/* harmony export */   uploadPart: () => (/* binding */ uploadPart),\n/* harmony export */   uploadPartWithProgress: () => (/* binding */ uploadPartWithProgress)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n// src/internal/multi-part.ts\n\n// src/internal/s3-error-parser.ts\nvar maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch == null ? void 0 : codeMatch[1];\n    const message = messageMatch == null ? void 0 : messageMatch[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\nvar DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nvar s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    // 403 Forbidden\n    EntityTooSmall: \"TOO_SMALL\",\n    // 400 Bad Request\n    EntityTooLarge: \"TOO_LARGE\",\n    // 400 Bad Request\n    ExpiredToken: \"FORBIDDEN\",\n    // 400 Bad Request\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    // 400 Bad Request\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    // 500 Internal Server Error\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    // 400 Bad Request\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\n// src/internal/multi-part.ts\nasync function uploadPart(opts, retryCount = 0) {\n    const s3Res = await opts.fetch(opts.url, {\n        method: \"PUT\",\n        body: opts.chunk,\n        headers: {\n            \"Content-Type\": opts.contentType,\n            \"Content-Disposition\": [\n                opts.contentDisposition,\n                `filename=\"${encodeURI(opts.fileName)}\"`,\n                `filename*=UTF-8''${encodeURI(opts.fileName)}`\n            ].join(\"; \")\n        }\n    });\n    if (s3Res.ok) {\n        const etag = s3Res.headers.get(\"Etag\");\n        if (!etag) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Missing Etag header from uploaded part\"\n            });\n        }\n        return etag.replace(/\"/g, \"\");\n    }\n    if (retryCount < opts.maxRetries) {\n        const delay = 2 ** retryCount * 1e3;\n        await new Promise((r)=>setTimeout(r, delay));\n        return uploadPart(opts, retryCount++);\n    }\n    await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/api/failureCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: opts.key\n        }),\n        headers: opts.utRequestHeaders\n    });\n    const text = await s3Res.text();\n    const parsed = maybeParseResponseXML(text);\n    if (parsed == null ? void 0 : parsed.message) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"UPLOAD_FAILED\",\n            message: parsed.message\n        });\n    }\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"Failed to upload file to storage provider\",\n        cause: s3Res\n    });\n}\nasync function uploadPartWithProgress(opts, retryCount = 0) {\n    return new Promise((resolve, reject)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", [\n            opts.contentDisposition,\n            `filename=\"${encodeURI(opts.fileName)}\"`,\n            `filename*=UTF-8''${encodeURI(opts.fileName)}`\n        ].join(\"; \"));\n        xhr.onload = async ()=>{\n            if (xhr.status >= 200 && xhr.status < 300) {\n                const etag = xhr.getResponseHeader(\"Etag\");\n                etag ? resolve(etag) : reject(\"NO ETAG\");\n            } else if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 1e3;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        let lastProgress = 0;\n        xhr.onerror = async ()=>{\n            lastProgress = 0;\n            if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 100;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        xhr.upload.onprogress = (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        };\n        xhr.send(opts.chunk);\n    });\n}\n //# sourceMappingURL=chunk-S3R3VXRK.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZCQUE2QjtBQUNrRDtBQUUvRSxrQ0FBa0M7QUFDbEMsSUFBSUUsd0JBQXdCLENBQUNDO0lBQzNCLE1BQU1DLFlBQVlELFNBQVNFLEtBQUssQ0FBQztJQUNqQyxNQUFNQyxlQUFlSCxTQUFTRSxLQUFLLENBQUM7SUFDcEMsTUFBTUUsT0FBT0gsYUFBYSxPQUFPLEtBQUssSUFBSUEsU0FBUyxDQUFDLEVBQUU7SUFDdEQsTUFBTUksVUFBVUYsZ0JBQWdCLE9BQU8sS0FBSyxJQUFJQSxZQUFZLENBQUMsRUFBRTtJQUMvRCxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsU0FDWixPQUFPO0lBQ1QsT0FBTztRQUFFRCxNQUFNRSx1QkFBdUIsQ0FBQ0YsS0FBSyxJQUFJRztRQUFvQkY7SUFBUTtBQUM5RTtBQUNBLElBQUlFLHFCQUFxQjtBQUN6QixJQUFJRCwwQkFBMEI7SUFDNUJFLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEJDLHFDQUFxQztJQUNyQyxrQkFBa0I7SUFDbEJDLGVBQWU7SUFDZiw0QkFBNEI7SUFDNUJDLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEJDLDBCQUEwQjtBQUU1QjtBQUVBLDZCQUE2QjtBQUM3QixlQUFlQyxXQUFXQyxJQUFJLEVBQUVDLGFBQWEsQ0FBQztJQUM1QyxNQUFNQyxRQUFRLE1BQU1GLEtBQUtHLEtBQUssQ0FBQ0gsS0FBS0ksR0FBRyxFQUFFO1FBQ3ZDQyxRQUFRO1FBQ1JDLE1BQU1OLEtBQUtPLEtBQUs7UUFDaEJDLFNBQVM7WUFDUCxnQkFBZ0JSLEtBQUtTLFdBQVc7WUFDaEMsdUJBQXVCO2dCQUNyQlQsS0FBS1Usa0JBQWtCO2dCQUN2QixDQUFDLFVBQVUs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Z0JBQzNDLE1BQU1ZLHVCQUF1Qi9CLE1BQU1DLGFBQWE7WUFDbEQsT0FBTztnQkFDTGdDLE9BQU87WUFDVDtRQUNGO1FBQ0FDLElBQUlhLE1BQU0sQ0FBQ0MsVUFBVSxHQUFHLENBQUNDO1lBQ3ZCLE1BQU1DLFFBQVFELEVBQUVFLE1BQU0sR0FBR047WUFDekJBLGdCQUFnQks7WUFDaEJsRCxLQUFLb0QsVUFBVSxDQUFDRjtRQUNsQjtRQUNBaEIsSUFBSW1CLElBQUksQ0FBQ3JELEtBQUtPLEtBQUs7SUFDckI7QUFDRjtBQU1FLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXZlbnRseS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NodW5rLVMzUjNWWFJLLm1qcz9hNDRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5pbXBvcnQgeyBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLCBVcGxvYWRUaGluZ0Vycm9yIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL2ludGVybmFsL3MzLWVycm9yLXBhcnNlci50c1xudmFyIG1heWJlUGFyc2VSZXNwb25zZVhNTCA9IChtYXliZVhtbCkgPT4ge1xuICBjb25zdCBjb2RlTWF0Y2ggPSBtYXliZVhtbC5tYXRjaCgvPENvZGU+KC4qPyk8XFwvQ29kZT4vcyk7XG4gIGNvbnN0IG1lc3NhZ2VNYXRjaCA9IG1heWJlWG1sLm1hdGNoKC88TWVzc2FnZT4oLio/KTxcXC9NZXNzYWdlPi9zKTtcbiAgY29uc3QgY29kZSA9IGNvZGVNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogY29kZU1hdGNoWzFdO1xuICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZU1hdGNoID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlTWF0Y2hbMV07XG4gIGlmICghY29kZSB8fCAhbWVzc2FnZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHsgY29kZTogczNDb2RlVG9VcGxvYWRUaGluZ0NvZGVbY29kZV0gPz8gREVGQVVMVF9FUlJPUl9DT0RFLCBtZXNzYWdlIH07XG59O1xudmFyIERFRkFVTFRfRVJST1JfQ09ERSA9IFwiVVBMT0FEX0ZBSUxFRFwiO1xudmFyIHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlID0ge1xuICBBY2Nlc3NEZW5pZWQ6IFwiRk9SQklEREVOXCIsXG4gIC8vIDQwMyBGb3JiaWRkZW5cbiAgRW50aXR5VG9vU21hbGw6IFwiVE9PX1NNQUxMXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBFbnRpdHlUb29MYXJnZTogXCJUT09fTEFSR0VcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEV4cGlyZWRUb2tlbjogXCJGT1JCSURERU5cIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEluY29ycmVjdE51bWJlck9mRmlsZXNJblBvc3RSZXF1ZXN0OiBcIlRPT19NQU5ZX0ZJTEVTXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBJbnRlcm5hbEVycm9yOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAvLyA1MDAgSW50ZXJuYWwgU2VydmVyIEVycm9yXG4gIEtleVRvb0xvbmdFcnJvcjogXCJLRVlfVE9PX0xPTkdcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIE1heE1lc3NhZ2VMZW5ndGhFeGNlZWRlZDogXCJUT09fTEFSR0VcIlxuICAvLyA0MDAgQmFkIFJlcXVlc3Rcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0KG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIGNvbnN0IHMzUmVzID0gYXdhaXQgb3B0cy5mZXRjaChvcHRzLnVybCwge1xuICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICBib2R5OiBvcHRzLmNodW5rLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IG9wdHMuY29udGVudFR5cGUsXG4gICAgICBcIkNvbnRlbnQtRGlzcG9zaXRpb25cIjogW1xuICAgICAgICBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgYGZpbGVuYW1lPVwiJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9XCJgLFxuICAgICAgICBgZmlsZW5hbWUqPVVURi04Jycke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1gXG4gICAgICBdLmpvaW4oXCI7IFwiKVxuICAgIH1cbiAgfSk7XG4gIGlmIChzM1Jlcy5vaykge1xuICAgIGNvbnN0IGV0YWcgPSBzM1Jlcy5oZWFkZXJzLmdldChcIkV0YWdcIik7XG4gICAgaWYgKCFldGFnKSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgRXRhZyBoZWFkZXIgZnJvbSB1cGxvYWRlZCBwYXJ0XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZXRhZy5yZXBsYWNlKC9cIi9nLCBcIlwiKTtcbiAgfVxuICBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgIGNvbnN0IGRlbGF5ID0gMiAqKiByZXRyeUNvdW50ICogMWUzO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIGRlbGF5KSk7XG4gICAgcmV0dXJuIHVwbG9hZFBhcnQob3B0cywgcmV0cnlDb3VudCsrKTtcbiAgfVxuICBhd2FpdCBvcHRzLmZldGNoKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvYXBpL2ZhaWx1cmVDYWxsYmFja1wiKSwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZmlsZUtleTogb3B0cy5rZXlcbiAgICB9KSxcbiAgICBoZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNcbiAgfSk7XG4gIGNvbnN0IHRleHQgPSBhd2FpdCBzM1Jlcy50ZXh0KCk7XG4gIGNvbnN0IHBhcnNlZCA9IG1heWJlUGFyc2VSZXNwb25zZVhNTCh0ZXh0KTtcbiAgaWYgKHBhcnNlZCA9PSBudWxsID8gdm9pZCAwIDogcGFyc2VkLm1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgIG1lc3NhZ2U6IHBhcnNlZC5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbiAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlIHRvIHN0b3JhZ2UgcHJvdmlkZXJcIixcbiAgICBjYXVzZTogczNSZXNcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oXCJQVVRcIiwgb3B0cy51cmwsIHRydWUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIG9wdHMuZmlsZVR5cGUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsXG4gICAgICBbXG4gICAgICAgIG9wdHMuY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICBgZmlsZW5hbWU9XCIke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1cImAsXG4gICAgICAgIGBmaWxlbmFtZSo9VVRGLTgnJyR7ZW5jb2RlVVJJKG9wdHMuZmlsZU5hbWUpfWBcbiAgICAgIF0uam9pbihcIjsgXCIpXG4gICAgKTtcbiAgICB4aHIub25sb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgY29uc3QgZXRhZyA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIkV0YWdcIik7XG4gICAgICAgIGV0YWcgPyByZXNvbHZlKGV0YWcpIDogcmVqZWN0KFwiTk8gRVRBR1wiKTtcbiAgICAgIH0gZWxzZSBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIHJldHJ5Q291bnQpICogMWUzO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgZGVsYXkpKTtcbiAgICAgICAgYXdhaXQgdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoXCJNYXggcmV0cmllcyBleGNlZWRlZFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxldCBsYXN0UHJvZ3Jlc3MgPSAwO1xuICAgIHhoci5vbmVycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgICAgbGFzdFByb2dyZXNzID0gMDtcbiAgICAgIGlmIChyZXRyeUNvdW50IDwgb3B0cy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgcmV0cnlDb3VudCkgKiAxMDA7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXMpID0+IHNldFRpbWVvdXQocmVzLCBkZWxheSkpO1xuICAgICAgICBhd2FpdCB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdChcIk1heCByZXRyaWVzIGV4Y2VlZGVkXCIpO1xuICAgICAgfVxuICAgIH07XG4gICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGRlbHRhID0gZS5sb2FkZWQgLSBsYXN0UHJvZ3Jlc3M7XG4gICAgICBsYXN0UHJvZ3Jlc3MgKz0gZGVsdGE7XG4gICAgICBvcHRzLm9uUHJvZ3Jlc3MoZGVsdGEpO1xuICAgIH07XG4gICAgeGhyLnNlbmQob3B0cy5jaHVuayk7XG4gIH0pO1xufVxuXG5leHBvcnQge1xuICBtYXliZVBhcnNlUmVzcG9uc2VYTUwsXG4gIHVwbG9hZFBhcnQsXG4gIHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1TM1IzVlhSSy5tanMubWFwIl0sIm5hbWVzIjpbImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwiLCJVcGxvYWRUaGluZ0Vycm9yIiwibWF5YmVQYXJzZVJlc3BvbnNlWE1MIiwibWF5YmVYbWwiLCJjb2RlTWF0Y2giLCJtYXRjaCIsIm1lc3NhZ2VNYXRjaCIsImNvZGUiLCJtZXNzYWdlIiwiczNDb2RlVG9VcGxvYWRUaGluZ0NvZGUiLCJERUZBVUxUX0VSUk9SX0NPREUiLCJBY2Nlc3NEZW5pZWQiLCJFbnRpdHlUb29TbWFsbCIsIkVudGl0eVRvb0xhcmdlIiwiRXhwaXJlZFRva2VuIiwiSW5jb3JyZWN0TnVtYmVyT2ZGaWxlc0luUG9zdFJlcXVlc3QiLCJJbnRlcm5hbEVycm9yIiwiS2V5VG9vTG9uZ0Vycm9yIiwiTWF4TWVzc2FnZUxlbmd0aEV4Y2VlZGVkIiwidXBsb2FkUGFydCIsIm9wdHMiLCJyZXRyeUNvdW50IiwiczNSZXMiLCJmZXRjaCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJjaHVuayIsImhlYWRlcnMiLCJjb250ZW50VHlwZSIsImNvbnRlbnREaXNwb3NpdGlvbiIsImVuY29kZVVSSSIsImZpbGVOYW1lIiwiam9pbiIsIm9rIiwiZXRhZyIsImdldCIsInJlcGxhY2UiLCJtYXhSZXRyaWVzIiwiZGVsYXkiLCJQcm9taXNlIiwiciIsInNldFRpbWVvdXQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsZUtleSIsImtleSIsInV0UmVxdWVzdEhlYWRlcnMiLCJ0ZXh0IiwicGFyc2VkIiwiY2F1c2UiLCJ1cGxvYWRQYXJ0V2l0aFByb2dyZXNzIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJmaWxlVHlwZSIsIm9ubG9hZCIsInN0YXR1cyIsImdldFJlc3BvbnNlSGVhZGVyIiwiTWF0aCIsInBvdyIsInJlcyIsImxhc3RQcm9ncmVzcyIsIm9uZXJyb3IiLCJ1cGxvYWQiLCJvbnByb2dyZXNzIiwiZSIsImRlbHRhIiwibG9hZGVkIiwib25Qcm9ncmVzcyIsInNlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-TX4EGJ4S.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-TX4EGJ4S.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UPLOADTHING_VERSION: () => (/* binding */ UPLOADTHING_VERSION),\n/* harmony export */   VALID_ACTION_TYPES: () => (/* binding */ VALID_ACTION_TYPES),\n/* harmony export */   buildPermissionsInfoHandler: () => (/* binding */ buildPermissionsInfoHandler),\n/* harmony export */   buildRequestHandler: () => (/* binding */ buildRequestHandler),\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder),\n/* harmony export */   defaultErrorFormatter: () => (/* binding */ defaultErrorFormatter),\n/* harmony export */   formatError: () => (/* binding */ formatError),\n/* harmony export */   unsetMarker: () => (/* binding */ unsetMarker)\n/* harmony export */ });\n/* harmony import */ var _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-4PDGVH57.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n// package.json\nvar package_default = {\n    name: \"uploadthing\",\n    version: \"6.0.4\",\n    engines: {\n        node: \">=18.13.0\"\n    },\n    license: \"MIT\",\n    exports: {\n        \"./package.json\": \"./package.json\",\n        \"./client\": {\n            types: \"./dist/client.d.ts\",\n            import: \"./dist/client.mjs\",\n            require: \"./dist/client.js\"\n        },\n        \"./server\": {\n            types: \"./dist/server.d.ts\",\n            import: \"./dist/server.mjs\",\n            require: \"./dist/server.js\"\n        },\n        \"./next\": {\n            types: \"./dist/next.d.ts\",\n            import: \"./dist/next.mjs\",\n            require: \"./dist/next.js\"\n        },\n        \"./next-legacy\": {\n            types: \"./dist/next-legacy.d.ts\",\n            import: \"./dist/next-legacy.mjs\",\n            require: \"./dist/next-legacy.js\"\n        },\n        \"./express\": {\n            import: \"./dist/express.mjs\",\n            types: \"./dist/express.d.ts\",\n            require: \"./dist/express.js\"\n        },\n        \"./tw\": {\n            types: \"./dist/tw.d.ts\",\n            import: \"./dist/tw.mjs\",\n            require: \"./dist/tw.js\"\n        },\n        \"./fastify\": {\n            types: \"./dist/fastify.d.ts\",\n            import: \"./dist/fastify.mjs\",\n            require: \"./dist/fastify.js\"\n        },\n        \"./h3\": {\n            types: \"./dist/h3.d.ts\",\n            import: \"./dist/h3.mjs\",\n            require: \"./dist/h3.js\"\n        }\n    },\n    files: [\n        \"dist\"\n    ],\n    publishConfig: {\n        access: \"public\"\n    },\n    typesVersions: {\n        \"*\": {\n            client: [\n                \"dist/client.d.ts\"\n            ],\n            server: [\n                \"dist/server.d.ts\"\n            ],\n            next: [\n                \"dist/next.d.ts\"\n            ],\n            \"next-legacy\": [\n                \"dist/next-legacy.d.ts\"\n            ],\n            tw: [\n                \"dist/tw.d.ts\"\n            ],\n            express: [\n                \"dist/express.d.ts\"\n            ],\n            fastify: [\n                \"dist/fastify.d.ts\"\n            ],\n            h3: [\n                \"dist/h3.d.ts\"\n            ]\n        }\n    },\n    scripts: {\n        lint: 'eslint \"**/*.{ts,tsx}\" --max-warnings 0',\n        build: \"tsup\",\n        clean: \"git clean -xdf dist node_modules\",\n        dev: \"tsup --watch\",\n        test: \"vitest run\",\n        \"test:watch\": \"vitest\",\n        typecheck: \"tsc --noEmit\"\n    },\n    dependencies: {\n        \"@uploadthing/mime-types\": \"^0.2.2\",\n        \"@uploadthing/shared\": \"^6.0.2\"\n    },\n    devDependencies: {\n        \"@types/express\": \"^4.17.17\",\n        \"@types/react\": \"18.2.33\",\n        \"@uploadthing/eslint-config\": \"0.2.0\",\n        \"@uploadthing/tsconfig\": \"0.1.0\",\n        \"@uploadthing/tsup-config\": \"0.1.0\",\n        eslint: \"^8.47.0\",\n        express: \"^4.18.2\",\n        fastify: \"^4.23.2\",\n        h3: \"^1.8.1\",\n        next: \"14.0.1\",\n        \"solid-js\": \"^1.7.11\",\n        tailwindcss: \"^3.3.2\",\n        tsup: \"6.7.0\",\n        \"type-fest\": \"^3.11.1\",\n        typescript: \"^5.1.6\",\n        undici: \"^5.20.0\",\n        vitest: \"^0.30.1\",\n        zod: \"^3.22.3\"\n    },\n    eslintConfig: {\n        root: true,\n        extends: [\n            \"@uploadthing/eslint-config/base\"\n        ]\n    }\n};\n// src/constants.ts\nif (!package_default.version) throw new Error(\"no version found in package.json\");\nvar UPLOADTHING_VERSION = package_default.version;\n// src/internal/error-formatter.ts\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction formatError(error, router) {\n    var _a;\n    const errorFormatter = ((_a = router[Object.keys(router)[0]]) == null ? void 0 : _a._def.errorFormatter) ?? defaultErrorFormatter;\n    return errorFormatter(error);\n}\n// src/internal/types.ts\nvar unsetMarker = \"unsetMarker\";\nvar VALID_ACTION_TYPES = [\n    \"upload\",\n    \"failure\",\n    \"multipart-complete\"\n];\n// src/internal/handler.ts\n\n// src/internal/dev-hook.ts\n\nvar isValidResponse = (response)=>{\n    if (!response.ok) return false;\n    if (response.status >= 400) return false;\n    if (!response.headers.has(\"x-uploadthing-version\")) return false;\n    return true;\n};\nvar conditionalDevServer = async (opts)=>{\n    if (false) {}\n    const fileData = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.pollForFileData)({\n        url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateUploadThingURL)(`/api/pollUpload/${opts.fileKey}`),\n        apiKey: opts.apiKey,\n        sdkVersion: UPLOADTHING_VERSION\n    }, async (json)=>{\n        const file = json.fileData;\n        let callbackUrl = file.callbackUrl + `?slug=${file.callbackSlug}`;\n        if (!callbackUrl.startsWith(\"http\")) callbackUrl = \"http://\" + callbackUrl;\n        console.log(\"[UT] SIMULATING FILE UPLOAD WEBHOOK CALLBACK\", callbackUrl);\n        const response = await fetch(callbackUrl, {\n            method: \"POST\",\n            body: JSON.stringify({\n                status: \"uploaded\",\n                metadata: JSON.parse(file.metadata ?? \"{}\"),\n                file: {\n                    url: `https://utfs.io/f/${encodeURIComponent(opts.fileKey)}`,\n                    key: opts.fileKey,\n                    name: file.fileName,\n                    size: file.fileSize\n                }\n            }),\n            headers: {\n                \"uploadthing-hook\": \"callback\"\n            }\n        });\n        if (isValidResponse(response)) {\n            console.log(\"[UT] Successfully simulated callback for file\", opts.fileKey);\n        } else {\n            console.error(\"[UT] Failed to simulate callback for file. Is your webhook configured correctly?\", opts.fileKey);\n        }\n        return file;\n    });\n    if (fileData !== void 0) return fileData;\n    console.error(`[UT] Failed to simulate callback for file ${opts.fileKey}`);\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"File took too long to upload\"\n    });\n};\n// src/internal/parser.ts\nfunction getParseFn(parser) {\n    if (typeof parser.parse === \"function\") {\n        return parser.parse;\n    }\n    throw new Error(\"Invalid parser\");\n}\n// src/internal/handler.ts\nvar createUTFetch = (apiKey)=>{\n    return async (endpoint, payload)=>{\n        const response = await fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateUploadThingURL)(endpoint), {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-uploadthing-api-key\": apiKey,\n                \"x-uploadthing-version\": UPLOADTHING_VERSION\n            }\n        });\n        return response;\n    };\n};\nvar fileCountLimitHit = (files, routeConfig)=>{\n    var _a;\n    const counts = {};\n    files.forEach((file)=>{\n        const type = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.getTypeFromFileName)(file.name, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(routeConfig));\n        if (!counts[type]) {\n            counts[type] = 1;\n        } else {\n            counts[type] += 1;\n        }\n    });\n    for(const _key in counts){\n        const key = _key;\n        const count = counts[key];\n        const limit = (_a = routeConfig[key]) == null ? void 0 : _a.maxFileCount;\n        if (!limit) {\n            console.error(routeConfig, key);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid config during file count\",\n                cause: `Expected route config to have a maxFileCount for key ${key} but none was found.`\n            });\n        }\n        if (count > limit) {\n            return {\n                limitHit: true,\n                type: key,\n                limit,\n                count\n            };\n        }\n    }\n    return {\n        limitHit: false\n    };\n};\nvar getHeader = (req, key)=>{\n    if (req.headers instanceof Headers) {\n        return req.headers.get(key);\n    }\n    return req.headers[key];\n};\nvar buildRequestHandler = (opts)=>{\n    return async (input)=>{\n        var _a;\n        if (true) {\n            console.log(\"[UT] UploadThing dev server is now running!\");\n        }\n        const { req, res, event } = input;\n        const { router, config } = opts;\n        const preferredOrEnvSecret = (config == null ? void 0 : config.uploadthingSecret) ?? process.env.UPLOADTHING_SECRET;\n        let url;\n        try {\n            url = new URL(input.url ?? req.url ?? \"\");\n        } catch (error) {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: `Invalid url '${((_a = input.url) == null ? void 0 : _a.href) ?? req.url}'`,\n                cause: error\n            });\n        }\n        const params = url.searchParams;\n        const uploadthingHook = getHeader(req, \"uploadthing-hook\") ?? void 0;\n        const slug = params.get(\"slug\") ?? void 0;\n        const actionType = params.get(\"actionType\") ?? void 0;\n        if (!slug) return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n            code: \"BAD_REQUEST\",\n            message: \"No slug provided\"\n        });\n        if (slug && typeof slug !== \"string\") {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`slug` must be a string\",\n                cause: `Expected slug to be of type 'string', got '${typeof slug}'`\n            });\n        }\n        if (actionType && typeof actionType !== \"string\") {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`actionType` must be a string\",\n                cause: `Expected actionType to be of type 'string', got '${typeof actionType}'`\n            });\n        }\n        if (uploadthingHook && typeof uploadthingHook !== \"string\") {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`uploadthingHook` must be a string\",\n                cause: `Expected uploadthingHook to be of type 'string', got '${typeof uploadthingHook}'`\n            });\n        }\n        if (!preferredOrEnvSecret) {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: `Please set your preferred secret in ${slug} router's config or set UPLOADTHING_SECRET in your env file`,\n                cause: \"No secret provided\"\n            });\n        }\n        const uploadable = router[slug];\n        if (!uploadable) {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: `No file route found for slug ${slug}`\n            });\n        }\n        const utFetch = createUTFetch(preferredOrEnvSecret);\n        if (uploadthingHook === \"callback\") {\n            const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.safeParseJSON)(req);\n            if (maybeReqBody instanceof Error) {\n                return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid request body\",\n                    cause: maybeReqBody\n                });\n            }\n            const res2 = await uploadable.resolver({\n                file: maybeReqBody.file,\n                metadata: maybeReqBody.metadata\n            });\n            await utFetch(\"/api/serverCallback\", {\n                fileKey: maybeReqBody.file.key,\n                callbackData: res2 ?? null\n            });\n            return {\n                status: 200\n            };\n        }\n        if (!actionType || !VALID_ACTION_TYPES.includes(actionType)) {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                cause: `Invalid action type ${actionType}`,\n                message: `Expected ${VALID_ACTION_TYPES.map((x)=>`\"${x}\"`).join(\", \").replace(/,(?!.*,)/, \" or\")} but got \"${\"a\"}\"`\n            });\n        }\n        switch(actionType){\n            case \"upload\":\n                {\n                    const maybeInput = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.safeParseJSON)(req);\n                    if (maybeInput instanceof Error) {\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeInput\n                        });\n                    }\n                    const { files, input: userInput } = maybeInput;\n                    let parsedInput = {};\n                    try {\n                        const inputParser = uploadable._def.inputParser;\n                        parsedInput = await getParseFn(inputParser)(userInput);\n                    } catch (error) {\n                        console.error(error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid input.\",\n                            cause: error\n                        });\n                    }\n                    let metadata = {};\n                    try {\n                        metadata = await uploadable._def.middleware({\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                            req,\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                            res,\n                            event,\n                            input: parsedInput\n                        });\n                    } catch (error) {\n                        console.error(error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Failed to run middleware.\",\n                            cause: error\n                        });\n                    }\n                    if (!Array.isArray(files) || !files.every((f)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.isObject)(f) && typeof f.name === \"string\" && typeof f.size === \"number\")) return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Files must be an array of objects with name and size\",\n                        cause: `Expected files to be of type '{name:string, size:number}[]', got '${JSON.stringify(files)}'`\n                    });\n                    let parsedConfig;\n                    try {\n                        parsedConfig = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(uploadable._def.routerConfig);\n                    } catch (error) {\n                        console.error(error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid config.\",\n                            cause: error\n                        });\n                    }\n                    try {\n                        const { limitHit, count, limit, type } = fileCountLimitHit(files, parsedConfig);\n                        if (limitHit) {\n                            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                                code: \"BAD_REQUEST\",\n                                message: \"File limit exceeded\",\n                                cause: `You uploaded ${count} files of type '${type}', but the limit for that type is ${limit}`\n                            });\n                        }\n                    } catch (error) {\n                        console.error(error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid config.\",\n                            cause: error\n                        });\n                    }\n                    const callbackUrl = resolveCallbackUrl({\n                        config,\n                        req,\n                        url\n                    });\n                    const uploadthingApiResponse = await utFetch(\"/api/prepareUpload\", {\n                        files,\n                        routeConfig: parsedConfig,\n                        metadata,\n                        callbackUrl: callbackUrl.origin + callbackUrl.pathname,\n                        callbackSlug: slug\n                    });\n                    const parsedResponse = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.safeParseJSON)(uploadthingApiResponse);\n                    if (!uploadthingApiResponse.ok || parsedResponse instanceof Error) {\n                        console.error(\"[UT] unable to get presigned urls\");\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"URL_GENERATION_FAILED\",\n                            message: \"Unable to get presigned urls\",\n                            cause: parsedResponse\n                        });\n                    }\n                    if (true) {\n                        for (const file of parsedResponse){\n                            void conditionalDevServer({\n                                fileKey: file.key,\n                                apiKey: preferredOrEnvSecret\n                            });\n                        }\n                    }\n                    return {\n                        body: parsedResponse.map((x)=>({\n                                ...x,\n                                pollingUrl: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateUploadThingURL)(`/api/serverCallback`)\n                            })),\n                        status: 200\n                    };\n                }\n            case \"multipart-complete\":\n                {\n                    const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.safeParseJSON)(req);\n                    if (maybeReqBody instanceof Error) {\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeReqBody\n                        });\n                    }\n                    const completeRes = await utFetch(\"/api/completeMultipart\", {\n                        fileKey: maybeReqBody.fileKey,\n                        uploadId: maybeReqBody.uploadId,\n                        etags: maybeReqBody.etags\n                    });\n                    if (!completeRes.ok) {\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"UPLOAD_FAILED\",\n                            message: \"Failed to complete multipart upload\"\n                        });\n                    }\n                    return {\n                        status: 200\n                    };\n                }\n            case \"failure\":\n                {\n                    const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.safeParseJSON)(req);\n                    if (maybeReqBody instanceof Error) {\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeReqBody\n                        });\n                    }\n                    const { fileKey, uploadId } = maybeReqBody;\n                    const uploadthingApiResponse = await utFetch(\"/api/failureCallback\", {\n                        fileKey,\n                        uploadId\n                    });\n                    if (!uploadthingApiResponse.ok) {\n                        console.error(\"[UT] failed to mark upload as failed\");\n                        const parsedResponse = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.safeParseJSON)(uploadthingApiResponse);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"URL_GENERATION_FAILED\",\n                            message: \"Unable to get presigned urls\",\n                            cause: parsedResponse\n                        });\n                    }\n                    try {\n                        uploadable._def.onUploadError({\n                            error: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                                code: \"UPLOAD_FAILED\",\n                                message: `Upload failed for ${fileKey}`\n                            }),\n                            fileKey\n                        });\n                    } catch (error) {\n                        console.error(\"[UT] Failed to run onUploadError callback. You probably shouldn't be throwing errors in your callback.\");\n                        console.error(error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Failed to run onUploadError callback\",\n                            cause: error\n                        });\n                    }\n                    return {\n                        status: 200\n                    };\n                }\n            default:\n                {\n                    return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                        code: \"BAD_REQUEST\",\n                        message: `Invalid action type`\n                    });\n                }\n        }\n    };\n};\nfunction resolveCallbackUrl(opts) {\n    var _a, _b;\n    let callbackUrl = opts.url;\n    if ((_a = opts.config) == null ? void 0 : _a.callbackUrl) {\n        callbackUrl = (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(opts.config.callbackUrl);\n    } else if (process.env.UPLOADTHING_URL) {\n        callbackUrl = (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(process.env.UPLOADTHING_URL);\n    }\n    if (true) {\n        return callbackUrl;\n    }\n    let parsedFromHeaders = (_b = getHeader(opts.req, \"origin\") ?? getHeader(opts.req, \"referer\") ?? getHeader(opts.req, \"host\") ?? getHeader(opts.req, \"x-forwarded-host\")) == null ? void 0 : _b.toString();\n    if (parsedFromHeaders && !parsedFromHeaders.includes(\"http\")) {\n        parsedFromHeaders = (getHeader(opts.req, \"x-forwarded-proto\") ?? \"https\").toString() + \"://\" + parsedFromHeaders;\n    }\n    if (!parsedFromHeaders || parsedFromHeaders.includes(\"localhost\")) {\n        console.warn([\n            \"[UT] [WARN] You are using a localhost callback url in production which is not supported.\",\n            \"Read more and learn how to fix it here: https://uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production\"\n        ].join(\" \"));\n        return callbackUrl;\n    }\n    return (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(parsedFromHeaders);\n}\nvar buildPermissionsInfoHandler = (opts)=>{\n    return ()=>{\n        const r = opts.router;\n        const permissions = Object.keys(r).map((k)=>{\n            const route = r[k];\n            const config = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(route._def.routerConfig);\n            return {\n                slug: k,\n                config\n            };\n        });\n        return permissions;\n    };\n};\n// src/internal/upload-builder.ts\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        inputParser: {\n            parse: ()=>({}),\n            _input: {},\n            _output: {}\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>({}),\n        errorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                _def,\n                resolver: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\nfunction createBuilder(opts) {\n    return (input)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            ...opts\n        });\n    };\n}\n //# sourceMappingURL=chunk-TX4EGJ4S.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1UWDRFR0o0Uy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUU4QjtBQUU5QixlQUFlO0FBQ2YsSUFBSUMsa0JBQWtCO0lBQ3BCQyxNQUFNO0lBQ05DLFNBQVM7SUFDVEMsU0FBUztRQUNQQyxNQUFNO0lBQ1I7SUFDQUMsU0FBUztJQUNUQyxTQUFTO1FBQ1Asa0JBQWtCO1FBQ2xCLFlBQVk7WUFDVkMsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFNBQVM7UUFDWDtRQUNBLFlBQVk7WUFDVkYsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFNBQVM7UUFDWDtRQUNBLFVBQVU7WUFDUkYsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFNBQVM7UUFDWDtRQUNBLGlCQUFpQjtZQUNmRixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsYUFBYTtZQUNYRCxRQUFRO1lBQ1JELE9BQU87WUFDUEUsU0FBUztRQUNYO1FBQ0EsUUFBUTtZQUNORixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsYUFBYTtZQUNYRixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsUUFBUTtZQUNORixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO0lBQ0Y7SUFDQUMsT0FBTztRQUNMO0tBQ0Q7SUFDREMsZUFBZTtRQUNiQyxRQUFRO0lBQ1Y7SUFDQUMsZUFBZTtRQUNiLEtBQUs7WUFDSEMsUUFBUTtnQkFDTjthQUNEO1lBQ0RDLFFBQVE7Z0JBQ047YUFDRDtZQUNEQyxNQUFNO2dCQUNKO2FBQ0Q7WUFDRCxlQUFlO2dCQUNiO2FBQ0Q7WUFDREMsSUFBSTtnQkFDRjthQUNEO1lBQ0RDLFNBQVM7Z0JBQ1A7YUFDRDtZQUNEQyxTQUFTO2dCQUNQO2FBQ0Q7WUFDREMsSUFBSTtnQkFDRjthQUNEO1FBQ0g7SUFDRjtJQUNBQyxTQUFTO1FBQ1BDLE1BQU07UUFDTkMsT0FB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T0FBTztJQUNaO0lBQ0EsT0FBTztRQUNMM0QsT0FBTWdFLFVBQVU7WUFDZCxPQUFPTixzQkFBc0I7Z0JBQzNCLEdBQUcvSCxJQUFJO2dCQUNQa0csYUFBYW1DO1lBQ2Y7UUFDRjtRQUNBbEMsWUFBV21DLGNBQWM7WUFDdkIsT0FBT1Asc0JBQXNCO2dCQUMzQixHQUFHL0gsSUFBSTtnQkFDUG1HLFlBQVltQztZQUNkO1FBQ0Y7UUFDQUMsa0JBQWlCQyxrQkFBa0I7WUFDakMsT0FBTztnQkFDTHhJO2dCQUNBd0YsVUFBVWdEO1lBQ1o7UUFDRjtRQUNBckIsZUFBY3NCLGlCQUFpQjtZQUM3QixPQUFPVixzQkFBc0I7Z0JBQzNCLEdBQUcvSCxJQUFJO2dCQUNQbUgsZUFBZXNCO1lBQ2pCO1FBQ0Y7SUFDRjtBQUNGO0FBQ0EsU0FBU0MsY0FBY3JILElBQUk7SUFDekIsT0FBTyxDQUFDZ0Q7UUFDTixPQUFPMEQsc0JBQXNCO1lBQzNCdEIsY0FBY3BDO1lBQ2QsR0FBR2hELElBQUk7UUFDVDtJQUNGO0FBQ0Y7QUFXRSxDQUNGLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V2ZW50bHkvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1UWDRFR0o0Uy5tanM/NzhhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBnZXRGdWxsQXBpVXJsXG59IGZyb20gXCIuL2NodW5rLTRQREdWSDU3Lm1qc1wiO1xuXG4vLyBwYWNrYWdlLmpzb25cbnZhciBwYWNrYWdlX2RlZmF1bHQgPSB7XG4gIG5hbWU6IFwidXBsb2FkdGhpbmdcIixcbiAgdmVyc2lvbjogXCI2LjAuNFwiLFxuICBlbmdpbmVzOiB7XG4gICAgbm9kZTogXCI+PTE4LjEzLjBcIlxuICB9LFxuICBsaWNlbnNlOiBcIk1JVFwiLFxuICBleHBvcnRzOiB7XG4gICAgXCIuL3BhY2thZ2UuanNvblwiOiBcIi4vcGFja2FnZS5qc29uXCIsXG4gICAgXCIuL2NsaWVudFwiOiB7XG4gICAgICB0eXBlczogXCIuL2Rpc3QvY2xpZW50LmQudHNcIixcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvY2xpZW50Lm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvY2xpZW50LmpzXCJcbiAgICB9LFxuICAgIFwiLi9zZXJ2ZXJcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L3NlcnZlci5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L3NlcnZlci5tanNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L3NlcnZlci5qc1wiXG4gICAgfSxcbiAgICBcIi4vbmV4dFwiOiB7XG4gICAgICB0eXBlczogXCIuL2Rpc3QvbmV4dC5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L25leHQubWpzXCIsXG4gICAgICByZXF1aXJlOiBcIi4vZGlzdC9uZXh0LmpzXCJcbiAgICB9LFxuICAgIFwiLi9uZXh0LWxlZ2FjeVwiOiB7XG4gICAgICB0eXBlczogXCIuL2Rpc3QvbmV4dC1sZWdhY3kuZC50c1wiLFxuICAgICAgaW1wb3J0OiBcIi4vZGlzdC9uZXh0LWxlZ2FjeS5tanNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L25leHQtbGVnYWN5LmpzXCJcbiAgICB9LFxuICAgIFwiLi9leHByZXNzXCI6IHtcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvZXhwcmVzcy5tanNcIixcbiAgICAgIHR5cGVzOiBcIi4vZGlzdC9leHByZXNzLmQudHNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L2V4cHJlc3MuanNcIlxuICAgIH0sXG4gICAgXCIuL3R3XCI6IHtcbiAgICAgIHR5cGVzOiBcIi4vZGlzdC90dy5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L3R3Lm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvdHcuanNcIlxuICAgIH0sXG4gICAgXCIuL2Zhc3RpZnlcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L2Zhc3RpZnkuZC50c1wiLFxuICAgICAgaW1wb3J0OiBcIi4vZGlzdC9mYXN0aWZ5Lm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvZmFzdGlmeS5qc1wiXG4gICAgfSxcbiAgICBcIi4vaDNcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L2gzLmQudHNcIixcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvaDMubWpzXCIsXG4gICAgICByZXF1aXJlOiBcIi4vZGlzdC9oMy5qc1wiXG4gICAgfVxuICB9LFxuICBmaWxlczogW1xuICAgIFwiZGlzdFwiXG4gIF0sXG4gIHB1Ymxpc2hDb25maWc6IHtcbiAgICBhY2Nlc3M6IFwicHVibGljXCJcbiAgfSxcbiAgdHlwZXNWZXJzaW9uczoge1xuICAgIFwiKlwiOiB7XG4gICAgICBjbGllbnQ6IFtcbiAgICAgICAgXCJkaXN0L2NsaWVudC5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBzZXJ2ZXI6IFtcbiAgICAgICAgXCJkaXN0L3NlcnZlci5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBuZXh0OiBbXG4gICAgICAgIFwiZGlzdC9uZXh0LmQudHNcIlxuICAgICAgXSxcbiAgICAgIFwibmV4dC1sZWdhY3lcIjogW1xuICAgICAgICBcImRpc3QvbmV4dC1sZWdhY3kuZC50c1wiXG4gICAgICBdLFxuICAgICAgdHc6IFtcbiAgICAgICAgXCJkaXN0L3R3LmQudHNcIlxuICAgICAgXSxcbiAgICAgIGV4cHJlc3M6IFtcbiAgICAgICAgXCJkaXN0L2V4cHJlc3MuZC50c1wiXG4gICAgICBdLFxuICAgICAgZmFzdGlmeTogW1xuICAgICAgICBcImRpc3QvZmFzdGlmeS5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBoMzogW1xuICAgICAgICBcImRpc3QvaDMuZC50c1wiXG4gICAgICBdXG4gICAgfVxuICB9LFxuICBzY3JpcHRzOiB7XG4gICAgbGludDogJ2VzbGludCBcIioqLyoue3RzLHRzeH1cIiAtLW1heC13YXJuaW5ncyAwJyxcbiAgICBidWlsZDogXCJ0c3VwXCIsXG4gICAgY2xlYW46IFwiZ2l0IGNsZWFuIC14ZGYgZGlzdCBub2RlX21vZHVsZXNcIixcbiAgICBkZXY6IFwidHN1cCAtLXdhdGNoXCIsXG4gICAgdGVzdDogXCJ2aXRlc3QgcnVuXCIsXG4gICAgXCJ0ZXN0OndhdGNoXCI6IFwidml0ZXN0XCIsXG4gICAgdHlwZWNoZWNrOiBcInRzYyAtLW5vRW1pdFwiXG4gIH0sXG4gIGRlcGVuZGVuY2llczoge1xuICAgIFwiQHVwbG9hZHRoaW5nL21pbWUtdHlwZXNcIjogXCJeMC4yLjJcIixcbiAgICBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjogXCJeNi4wLjJcIlxuICB9LFxuICBkZXZEZXBlbmRlbmNpZXM6IHtcbiAgICBcIkB0eXBlcy9leHByZXNzXCI6IFwiXjQuMTcuMTdcIixcbiAgICBcIkB0eXBlcy9yZWFjdFwiOiBcIjE4LjIuMzNcIixcbiAgICBcIkB1cGxvYWR0aGluZy9lc2xpbnQtY29uZmlnXCI6IFwiMC4yLjBcIixcbiAgICBcIkB1cGxvYWR0aGluZy90c2NvbmZpZ1wiOiBcIjAuMS4wXCIsXG4gICAgXCJAdXBsb2FkdGhpbmcvdHN1cC1jb25maWdcIjogXCIwLjEuMFwiLFxuICAgIGVzbGludDogXCJeOC40Ny4wXCIsXG4gICAgZXhwcmVzczogXCJeNC4xOC4yXCIsXG4gICAgZmFzdGlmeTogXCJeNC4yMy4yXCIsXG4gICAgaDM6IFwiXjEuOC4xXCIsXG4gICAgbmV4dDogXCIxNC4wLjFcIixcbiAgICBcInNvbGlkLWpzXCI6IFwiXjEuNy4xMVwiLFxuICAgIHRhaWx3aW5kY3NzOiBcIl4zLjMuMlwiLFxuICAgIHRzdXA6IFwiNi43LjBcIixcbiAgICBcInR5cGUtZmVzdFwiOiBcIl4zLjExLjFcIixcbiAgICB0eXBlc2NyaXB0OiBcIl41LjEuNlwiLFxuICAgIHVuZGljaTogXCJeNS4yMC4wXCIsXG4gICAgdml0ZXN0OiBcIl4wLjMwLjFcIixcbiAgICB6b2Q6IFwiXjMuMjIuM1wiXG4gIH0sXG4gIGVzbGludENvbmZpZzoge1xuICAgIHJvb3Q6IHRydWUsXG4gICAgZXh0ZW5kczogW1xuICAgICAgXCJAdXBsb2FkdGhpbmcvZXNsaW50LWNvbmZpZy9iYXNlXCJcbiAgICBdXG4gIH1cbn07XG5cbi8vIHNyYy9jb25zdGFudHMudHNcbmlmICghcGFja2FnZV9kZWZhdWx0LnZlcnNpb24pXG4gIHRocm93IG5ldyBFcnJvcihcIm5vIHZlcnNpb24gZm91bmQgaW4gcGFja2FnZS5qc29uXCIpO1xudmFyIFVQTE9BRFRISU5HX1ZFUlNJT04gPSBwYWNrYWdlX2RlZmF1bHQudmVyc2lvbjtcblxuLy8gc3JjL2ludGVybmFsL2Vycm9yLWZvcm1hdHRlci50c1xuZnVuY3Rpb24gZGVmYXVsdEVycm9yRm9ybWF0dGVyKGVycm9yKSB7XG4gIHJldHVybiB7XG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICB9O1xufVxuZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IsIHJvdXRlcikge1xuICB2YXIgX2E7XG4gIGNvbnN0IGVycm9yRm9ybWF0dGVyID0gKChfYSA9IHJvdXRlcltPYmplY3Qua2V5cyhyb3V0ZXIpWzBdXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLl9kZWYuZXJyb3JGb3JtYXR0ZXIpID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlcjtcbiAgcmV0dXJuIGVycm9yRm9ybWF0dGVyKGVycm9yKTtcbn1cblxuLy8gc3JjL2ludGVybmFsL3R5cGVzLnRzXG52YXIgdW5zZXRNYXJrZXIgPSBcInVuc2V0TWFya2VyXCI7XG52YXIgVkFMSURfQUNUSU9OX1RZUEVTID0gW1xuICBcInVwbG9hZFwiLFxuICBcImZhaWx1cmVcIixcbiAgXCJtdWx0aXBhcnQtY29tcGxldGVcIlxuXTtcblxuLy8gc3JjL2ludGVybmFsL2hhbmRsZXIudHNcbmltcG9ydCB7XG4gIGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwgYXMgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIsXG4gIGdldFR5cGVGcm9tRmlsZU5hbWUsXG4gIGlzT2JqZWN0LFxuICBvYmplY3RLZXlzLFxuICBmaWxsSW5wdXRSb3V0ZUNvbmZpZyBhcyBwYXJzZUFuZEV4cGFuZElucHV0Q29uZmlnLFxuICBzYWZlUGFyc2VKU09OLFxuICBVcGxvYWRUaGluZ0Vycm9yIGFzIFVwbG9hZFRoaW5nRXJyb3IyXG59IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5cbi8vIHNyYy9pbnRlcm5hbC9kZXYtaG9vay50c1xuaW1wb3J0IHtcbiAgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTCxcbiAgcG9sbEZvckZpbGVEYXRhLFxuICBVcGxvYWRUaGluZ0Vycm9yXG59IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG52YXIgaXNWYWxpZFJlc3BvbnNlID0gKHJlc3BvbnNlKSA9PiB7XG4gIGlmICghcmVzcG9uc2Uub2spXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMClcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmICghcmVzcG9uc2UuaGVhZGVycy5oYXMoXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIikpXG4gICAgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgY29uZGl0aW9uYWxEZXZTZXJ2ZXIgPSBhc3luYyAob3B0cykgPT4ge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiZGV2ZWxvcG1lbnRcIilcbiAgICByZXR1cm47XG4gIGNvbnN0IGZpbGVEYXRhID0gYXdhaXQgcG9sbEZvckZpbGVEYXRhKFxuICAgIHtcbiAgICAgIHVybDogZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChgL2FwaS9wb2xsVXBsb2FkLyR7b3B0cy5maWxlS2V5fWApLFxuICAgICAgYXBpS2V5OiBvcHRzLmFwaUtleSxcbiAgICAgIHNka1ZlcnNpb246IFVQTE9BRFRISU5HX1ZFUlNJT05cbiAgICB9LFxuICAgIGFzeW5jIChqc29uKSA9PiB7XG4gICAgICBjb25zdCBmaWxlID0ganNvbi5maWxlRGF0YTtcbiAgICAgIGxldCBjYWxsYmFja1VybCA9IGZpbGUuY2FsbGJhY2tVcmwgKyBgP3NsdWc9JHtmaWxlLmNhbGxiYWNrU2x1Z31gO1xuICAgICAgaWYgKCFjYWxsYmFja1VybC5zdGFydHNXaXRoKFwiaHR0cFwiKSlcbiAgICAgICAgY2FsbGJhY2tVcmwgPSBcImh0dHA6Ly9cIiArIGNhbGxiYWNrVXJsO1xuICAgICAgY29uc29sZS5sb2coXCJbVVRdIFNJTVVMQVRJTkcgRklMRSBVUExPQUQgV0VCSE9PSyBDQUxMQkFDS1wiLCBjYWxsYmFja1VybCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGNhbGxiYWNrVXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBzdGF0dXM6IFwidXBsb2FkZWRcIixcbiAgICAgICAgICBtZXRhZGF0YTogSlNPTi5wYXJzZShmaWxlLm1ldGFkYXRhID8/IFwie31cIiksXG4gICAgICAgICAgZmlsZToge1xuICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly91dGZzLmlvL2YvJHtlbmNvZGVVUklDb21wb25lbnQob3B0cy5maWxlS2V5KX1gLFxuICAgICAgICAgICAga2V5OiBvcHRzLmZpbGVLZXksXG4gICAgICAgICAgICBuYW1lOiBmaWxlLmZpbGVOYW1lLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5maWxlU2l6ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcInVwbG9hZHRoaW5nLWhvb2tcIjogXCJjYWxsYmFja1wiXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGlzVmFsaWRSZXNwb25zZShyZXNwb25zZSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJbVVRdIFN1Y2Nlc3NmdWxseSBzaW11bGF0ZWQgY2FsbGJhY2sgZm9yIGZpbGVcIixcbiAgICAgICAgICBvcHRzLmZpbGVLZXlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJbVVRdIEZhaWxlZCB0byBzaW11bGF0ZSBjYWxsYmFjayBmb3IgZmlsZS4gSXMgeW91ciB3ZWJob29rIGNvbmZpZ3VyZWQgY29ycmVjdGx5P1wiLFxuICAgICAgICAgIG9wdHMuZmlsZUtleVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZpbGU7XG4gICAgfVxuICApO1xuICBpZiAoZmlsZURhdGEgIT09IHZvaWQgMClcbiAgICByZXR1cm4gZmlsZURhdGE7XG4gIGNvbnNvbGUuZXJyb3IoYFtVVF0gRmFpbGVkIHRvIHNpbXVsYXRlIGNhbGxiYWNrIGZvciBmaWxlICR7b3B0cy5maWxlS2V5fWApO1xuICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgbWVzc2FnZTogXCJGaWxlIHRvb2sgdG9vIGxvbmcgdG8gdXBsb2FkXCJcbiAgfSk7XG59O1xuXG4vLyBzcmMvaW50ZXJuYWwvcGFyc2VyLnRzXG5mdW5jdGlvbiBnZXRQYXJzZUZuKHBhcnNlcikge1xuICBpZiAodHlwZW9mIHBhcnNlci5wYXJzZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHBhcnNlci5wYXJzZTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcnNlclwiKTtcbn1cblxuLy8gc3JjL2ludGVybmFsL2hhbmRsZXIudHNcbnZhciBjcmVhdGVVVEZldGNoID0gKGFwaUtleSkgPT4ge1xuICByZXR1cm4gYXN5bmMgKGVuZHBvaW50LCBwYXlsb2FkKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMMihlbmRwb2ludCksIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IGFwaUtleSxcbiAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfTtcbn07XG52YXIgZmlsZUNvdW50TGltaXRIaXQgPSAoZmlsZXMsIHJvdXRlQ29uZmlnKSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgY291bnRzID0ge307XG4gIGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICBjb25zdCB0eXBlID0gZ2V0VHlwZUZyb21GaWxlTmFtZShmaWxlLm5hbWUsIG9iamVjdEtleXMocm91dGVDb25maWcpKTtcbiAgICBpZiAoIWNvdW50c1t0eXBlXSkge1xuICAgICAgY291bnRzW3R5cGVdID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgY291bnRzW3R5cGVdICs9IDE7XG4gICAgfVxuICB9KTtcbiAgZm9yIChjb25zdCBfa2V5IGluIGNvdW50cykge1xuICAgIGNvbnN0IGtleSA9IF9rZXk7XG4gICAgY29uc3QgY291bnQgPSBjb3VudHNba2V5XTtcbiAgICBjb25zdCBsaW1pdCA9IChfYSA9IHJvdXRlQ29uZmlnW2tleV0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5tYXhGaWxlQ291bnQ7XG4gICAgaWYgKCFsaW1pdCkge1xuICAgICAgY29uc29sZS5lcnJvcihyb3V0ZUNvbmZpZywga2V5KTtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGNvbmZpZyBkdXJpbmcgZmlsZSBjb3VudFwiLFxuICAgICAgICBjYXVzZTogYEV4cGVjdGVkIHJvdXRlIGNvbmZpZyB0byBoYXZlIGEgbWF4RmlsZUNvdW50IGZvciBrZXkgJHtrZXl9IGJ1dCBub25lIHdhcyBmb3VuZC5gXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGNvdW50ID4gbGltaXQpIHtcbiAgICAgIHJldHVybiB7IGxpbWl0SGl0OiB0cnVlLCB0eXBlOiBrZXksIGxpbWl0LCBjb3VudCB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4geyBsaW1pdEhpdDogZmFsc2UgfTtcbn07XG52YXIgZ2V0SGVhZGVyID0gKHJlcSwga2V5KSA9PiB7XG4gIGlmIChyZXEuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICByZXR1cm4gcmVxLmhlYWRlcnMuZ2V0KGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcS5oZWFkZXJzW2tleV07XG59O1xudmFyIGJ1aWxkUmVxdWVzdEhhbmRsZXIgPSAob3B0cykgPT4ge1xuICByZXR1cm4gYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIltVVF0gVXBsb2FkVGhpbmcgZGV2IHNlcnZlciBpcyBub3cgcnVubmluZyFcIik7XG4gICAgfVxuICAgIGNvbnN0IHsgcmVxLCByZXMsIGV2ZW50IH0gPSBpbnB1dDtcbiAgICBjb25zdCB7IHJvdXRlciwgY29uZmlnIH0gPSBvcHRzO1xuICAgIGNvbnN0IHByZWZlcnJlZE9yRW52U2VjcmV0ID0gKGNvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY29uZmlnLnVwbG9hZHRoaW5nU2VjcmV0KSA/PyBwcm9jZXNzLmVudi5VUExPQURUSElOR19TRUNSRVQ7XG4gICAgbGV0IHVybDtcbiAgICB0cnkge1xuICAgICAgdXJsID0gbmV3IFVSTChpbnB1dC51cmwgPz8gcmVxLnVybCA/PyBcIlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogYEludmFsaWQgdXJsICckeygoX2EgPSBpbnB1dC51cmwpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ocmVmKSA/PyByZXEudXJsfSdgLFxuICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbXMgPSB1cmwuc2VhcmNoUGFyYW1zO1xuICAgIGNvbnN0IHVwbG9hZHRoaW5nSG9vayA9IGdldEhlYWRlcihyZXEsIFwidXBsb2FkdGhpbmctaG9va1wiKSA/PyB2b2lkIDA7XG4gICAgY29uc3Qgc2x1ZyA9IHBhcmFtcy5nZXQoXCJzbHVnXCIpID8/IHZvaWQgMDtcbiAgICBjb25zdCBhY3Rpb25UeXBlID0gcGFyYW1zLmdldChcImFjdGlvblR5cGVcIikgPz8gdm9pZCAwO1xuICAgIGlmICghc2x1ZylcbiAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm8gc2x1ZyBwcm92aWRlZFwiXG4gICAgICB9KTtcbiAgICBpZiAoc2x1ZyAmJiB0eXBlb2Ygc2x1ZyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgc2x1Z2AgbXVzdCBiZSBhIHN0cmluZ1wiLFxuICAgICAgICBjYXVzZTogYEV4cGVjdGVkIHNsdWcgdG8gYmUgb2YgdHlwZSAnc3RyaW5nJywgZ290ICcke3R5cGVvZiBzbHVnfSdgXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGFjdGlvblR5cGUgJiYgdHlwZW9mIGFjdGlvblR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiYGFjdGlvblR5cGVgIG11c3QgYmUgYSBzdHJpbmdcIixcbiAgICAgICAgY2F1c2U6IGBFeHBlY3RlZCBhY3Rpb25UeXBlIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2YgYWN0aW9uVHlwZX0nYFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh1cGxvYWR0aGluZ0hvb2sgJiYgdHlwZW9mIHVwbG9hZHRoaW5nSG9vayAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgdXBsb2FkdGhpbmdIb29rYCBtdXN0IGJlIGEgc3RyaW5nXCIsXG4gICAgICAgIGNhdXNlOiBgRXhwZWN0ZWQgdXBsb2FkdGhpbmdIb29rIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2YgdXBsb2FkdGhpbmdIb29rfSdgXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFwcmVmZXJyZWRPckVudlNlY3JldCkge1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogYFBsZWFzZSBzZXQgeW91ciBwcmVmZXJyZWQgc2VjcmV0IGluICR7c2x1Z30gcm91dGVyJ3MgY29uZmlnIG9yIHNldCBVUExPQURUSElOR19TRUNSRVQgaW4geW91ciBlbnYgZmlsZWAsXG4gICAgICAgIGNhdXNlOiBcIk5vIHNlY3JldCBwcm92aWRlZFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgdXBsb2FkYWJsZSA9IHJvdXRlcltzbHVnXTtcbiAgICBpZiAoIXVwbG9hZGFibGUpIHtcbiAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIk5PVF9GT1VORFwiLFxuICAgICAgICBtZXNzYWdlOiBgTm8gZmlsZSByb3V0ZSBmb3VuZCBmb3Igc2x1ZyAke3NsdWd9YFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHV0RmV0Y2ggPSBjcmVhdGVVVEZldGNoKHByZWZlcnJlZE9yRW52U2VjcmV0KTtcbiAgICBpZiAodXBsb2FkdGhpbmdIb29rID09PSBcImNhbGxiYWNrXCIpIHtcbiAgICAgIGNvbnN0IG1heWJlUmVxQm9keSA9IGF3YWl0IHNhZmVQYXJzZUpTT04ocmVxKTtcbiAgICAgIGlmIChtYXliZVJlcUJvZHkgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLFxuICAgICAgICAgIGNhdXNlOiBtYXliZVJlcUJvZHlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXMyID0gYXdhaXQgdXBsb2FkYWJsZS5yZXNvbHZlcih7XG4gICAgICAgIGZpbGU6IG1heWJlUmVxQm9keS5maWxlLFxuICAgICAgICBtZXRhZGF0YTogbWF5YmVSZXFCb2R5Lm1ldGFkYXRhXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHV0RmV0Y2goXCIvYXBpL3NlcnZlckNhbGxiYWNrXCIsIHtcbiAgICAgICAgZmlsZUtleTogbWF5YmVSZXFCb2R5LmZpbGUua2V5LFxuICAgICAgICBjYWxsYmFja0RhdGE6IHJlczIgPz8gbnVsbFxuICAgICAgfSk7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IDIwMCB9O1xuICAgIH1cbiAgICBpZiAoIWFjdGlvblR5cGUgfHwgIVZBTElEX0FDVElPTl9UWVBFUy5pbmNsdWRlcyhhY3Rpb25UeXBlKSkge1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgY2F1c2U6IGBJbnZhbGlkIGFjdGlvbiB0eXBlICR7YWN0aW9uVHlwZX1gLFxuICAgICAgICBtZXNzYWdlOiBgRXhwZWN0ZWQgJHtWQUxJRF9BQ1RJT05fVFlQRVMubWFwKCh4KSA9PiBgXCIke3h9XCJgKS5qb2luKFwiLCBcIikucmVwbGFjZSgvLCg/IS4qLCkvLCBcIiBvclwiKX0gYnV0IGdvdCBcIiR7XCJhXCJ9XCJgXG4gICAgICB9KTtcbiAgICB9XG4gICAgc3dpdGNoIChhY3Rpb25UeXBlKSB7XG4gICAgICBjYXNlIFwidXBsb2FkXCI6IHtcbiAgICAgICAgY29uc3QgbWF5YmVJbnB1dCA9IGF3YWl0IHNhZmVQYXJzZUpTT04ocmVxKTtcbiAgICAgICAgaWYgKG1heWJlSW5wdXQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLFxuICAgICAgICAgICAgY2F1c2U6IG1heWJlSW5wdXRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGZpbGVzLCBpbnB1dDogdXNlcklucHV0IH0gPSBtYXliZUlucHV0O1xuICAgICAgICBsZXQgcGFyc2VkSW5wdXQgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBpbnB1dFBhcnNlciA9IHVwbG9hZGFibGUuX2RlZi5pbnB1dFBhcnNlcjtcbiAgICAgICAgICBwYXJzZWRJbnB1dCA9IGF3YWl0IGdldFBhcnNlRm4oaW5wdXRQYXJzZXIpKHVzZXJJbnB1dCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXQuXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtZXRhZGF0YSA9IGF3YWl0IHVwbG9hZGFibGUuX2RlZi5taWRkbGV3YXJlKHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgaW5wdXQ6IHBhcnNlZElucHV0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG1pZGRsZXdhcmUuXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsZXMpIHx8ICFmaWxlcy5ldmVyeShcbiAgICAgICAgICAoZikgPT4gaXNPYmplY3QoZikgJiYgdHlwZW9mIGYubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgZi5zaXplID09PSBcIm51bWJlclwiXG4gICAgICAgICkpXG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZpbGVzIG11c3QgYmUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIG5hbWUgYW5kIHNpemVcIixcbiAgICAgICAgICAgIGNhdXNlOiBgRXhwZWN0ZWQgZmlsZXMgdG8gYmUgb2YgdHlwZSAne25hbWU6c3RyaW5nLCBzaXplOm51bWJlcn1bXScsIGdvdCAnJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgICAgZmlsZXNcbiAgICAgICAgICAgICl9J2BcbiAgICAgICAgICB9KTtcbiAgICAgICAgbGV0IHBhcnNlZENvbmZpZztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBwYXJzZWRDb25maWcgPSBwYXJzZUFuZEV4cGFuZElucHV0Q29uZmlnKFxuICAgICAgICAgICAgdXBsb2FkYWJsZS5fZGVmLnJvdXRlckNvbmZpZ1xuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY29uZmlnLlwiLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB7IGxpbWl0SGl0LCBjb3VudCwgbGltaXQsIHR5cGUgfSA9IGZpbGVDb3VudExpbWl0SGl0KFxuICAgICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgICBwYXJzZWRDb25maWdcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChsaW1pdEhpdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlIGxpbWl0IGV4Y2VlZGVkXCIsXG4gICAgICAgICAgICAgIGNhdXNlOiBgWW91IHVwbG9hZGVkICR7Y291bnR9IGZpbGVzIG9mIHR5cGUgJyR7dHlwZX0nLCBidXQgdGhlIGxpbWl0IGZvciB0aGF0IHR5cGUgaXMgJHtsaW1pdH1gXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY29uZmlnLlwiLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbGJhY2tVcmwgPSByZXNvbHZlQ2FsbGJhY2tVcmwoeyBjb25maWcsIHJlcSwgdXJsIH0pO1xuICAgICAgICBjb25zdCB1cGxvYWR0aGluZ0FwaVJlc3BvbnNlID0gYXdhaXQgdXRGZXRjaChcIi9hcGkvcHJlcGFyZVVwbG9hZFwiLCB7XG4gICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgcm91dGVDb25maWc6IHBhcnNlZENvbmZpZyxcbiAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICBjYWxsYmFja1VybDogY2FsbGJhY2tVcmwub3JpZ2luICsgY2FsbGJhY2tVcmwucGF0aG5hbWUsXG4gICAgICAgICAgY2FsbGJhY2tTbHVnOiBzbHVnXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXJzZWRSZXNwb25zZSA9IGF3YWl0IHNhZmVQYXJzZUpTT04oXG4gICAgICAgICAgdXBsb2FkdGhpbmdBcGlSZXNwb25zZVxuICAgICAgICApO1xuICAgICAgICBpZiAoIXVwbG9hZHRoaW5nQXBpUmVzcG9uc2Uub2sgfHwgcGFyc2VkUmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbVVRdIHVuYWJsZSB0byBnZXQgcHJlc2lnbmVkIHVybHNcIik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIlVSTF9HRU5FUkFUSU9OX0ZBSUxFRFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJVbmFibGUgdG8gZ2V0IHByZXNpZ25lZCB1cmxzXCIsXG4gICAgICAgICAgICBjYXVzZTogcGFyc2VkUmVzcG9uc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBwYXJzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgdm9pZCBjb25kaXRpb25hbERldlNlcnZlcih7XG4gICAgICAgICAgICAgIGZpbGVLZXk6IGZpbGUua2V5LFxuICAgICAgICAgICAgICBhcGlLZXk6IHByZWZlcnJlZE9yRW52U2VjcmV0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBib2R5OiBwYXJzZWRSZXNwb25zZS5tYXAoKHgpID0+ICh7XG4gICAgICAgICAgICAuLi54LFxuICAgICAgICAgICAgcG9sbGluZ1VybDogZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIoYC9hcGkvc2VydmVyQ2FsbGJhY2tgKVxuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBzdGF0dXM6IDIwMFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcIm11bHRpcGFydC1jb21wbGV0ZVwiOiB7XG4gICAgICAgIGNvbnN0IG1heWJlUmVxQm9keSA9IGF3YWl0IHNhZmVQYXJzZUpTT04ocmVxKTtcbiAgICAgICAgaWYgKG1heWJlUmVxQm9keSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcmVxdWVzdCBib2R5XCIsXG4gICAgICAgICAgICBjYXVzZTogbWF5YmVSZXFCb2R5XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGxldGVSZXMgPSBhd2FpdCB1dEZldGNoKFwiL2FwaS9jb21wbGV0ZU11bHRpcGFydFwiLCB7XG4gICAgICAgICAgZmlsZUtleTogbWF5YmVSZXFCb2R5LmZpbGVLZXksXG4gICAgICAgICAgdXBsb2FkSWQ6IG1heWJlUmVxQm9keS51cGxvYWRJZCxcbiAgICAgICAgICBldGFnczogbWF5YmVSZXFCb2R5LmV0YWdzXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWNvbXBsZXRlUmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNvbXBsZXRlIG11bHRpcGFydCB1cGxvYWRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogMjAwIH07XG4gICAgICB9XG4gICAgICBjYXNlIFwiZmFpbHVyZVwiOiB7XG4gICAgICAgIGNvbnN0IG1heWJlUmVxQm9keSA9IGF3YWl0IHNhZmVQYXJzZUpTT04ocmVxKTtcbiAgICAgICAgaWYgKG1heWJlUmVxQm9keSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcmVxdWVzdCBib2R5XCIsXG4gICAgICAgICAgICBjYXVzZTogbWF5YmVSZXFCb2R5XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBmaWxlS2V5LCB1cGxvYWRJZCB9ID0gbWF5YmVSZXFCb2R5O1xuICAgICAgICBjb25zdCB1cGxvYWR0aGluZ0FwaVJlc3BvbnNlID0gYXdhaXQgdXRGZXRjaChcIi9hcGkvZmFpbHVyZUNhbGxiYWNrXCIsIHtcbiAgICAgICAgICBmaWxlS2V5LFxuICAgICAgICAgIHVwbG9hZElkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXVwbG9hZHRoaW5nQXBpUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1VUXSBmYWlsZWQgdG8gbWFyayB1cGxvYWQgYXMgZmFpbGVkXCIpO1xuICAgICAgICAgIGNvbnN0IHBhcnNlZFJlc3BvbnNlID0gYXdhaXQgc2FmZVBhcnNlSlNPTihcbiAgICAgICAgICAgIHVwbG9hZHRoaW5nQXBpUmVzcG9uc2VcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJVUkxfR0VORVJBVElPTl9GQUlMRURcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGdldCBwcmVzaWduZWQgdXJsc1wiLFxuICAgICAgICAgICAgY2F1c2U6IHBhcnNlZFJlc3BvbnNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB1cGxvYWRhYmxlLl9kZWYub25VcGxvYWRFcnJvcih7XG4gICAgICAgICAgICBlcnJvcjogbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBVcGxvYWQgZmFpbGVkIGZvciAke2ZpbGVLZXl9YFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBmaWxlS2V5XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIFwiW1VUXSBGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3IgY2FsbGJhY2suIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGluIHlvdXIgY2FsbGJhY2suXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZEVycm9yIGNhbGxiYWNrXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IDIwMCB9O1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgYWN0aW9uIHR5cGVgXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5mdW5jdGlvbiByZXNvbHZlQ2FsbGJhY2tVcmwob3B0cykge1xuICB2YXIgX2EsIF9iO1xuICBsZXQgY2FsbGJhY2tVcmwgPSBvcHRzLnVybDtcbiAgaWYgKChfYSA9IG9wdHMuY29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbGJhY2tVcmwpIHtcbiAgICBjYWxsYmFja1VybCA9IGdldEZ1bGxBcGlVcmwob3B0cy5jb25maWcuY2FsbGJhY2tVcmwpO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52LlVQTE9BRFRISU5HX1VSTCkge1xuICAgIGNhbGxiYWNrVXJsID0gZ2V0RnVsbEFwaVVybChwcm9jZXNzLmVudi5VUExPQURUSElOR19VUkwpO1xuICB9XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgfHwgIWNhbGxiYWNrVXJsLmhvc3QuaW5jbHVkZXMoXCJsb2NhbGhvc3RcIikpIHtcbiAgICByZXR1cm4gY2FsbGJhY2tVcmw7XG4gIH1cbiAgbGV0IHBhcnNlZEZyb21IZWFkZXJzID0gKF9iID0gZ2V0SGVhZGVyKG9wdHMucmVxLCBcIm9yaWdpblwiKSA/PyBnZXRIZWFkZXIob3B0cy5yZXEsIFwicmVmZXJlclwiKSA/PyBnZXRIZWFkZXIob3B0cy5yZXEsIFwiaG9zdFwiKSA/PyBnZXRIZWFkZXIob3B0cy5yZXEsIFwieC1mb3J3YXJkZWQtaG9zdFwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRvU3RyaW5nKCk7XG4gIGlmIChwYXJzZWRGcm9tSGVhZGVycyAmJiAhcGFyc2VkRnJvbUhlYWRlcnMuaW5jbHVkZXMoXCJodHRwXCIpKSB7XG4gICAgcGFyc2VkRnJvbUhlYWRlcnMgPSAoZ2V0SGVhZGVyKG9wdHMucmVxLCBcIngtZm9yd2FyZGVkLXByb3RvXCIpID8/IFwiaHR0cHNcIikudG9TdHJpbmcoKSArIFwiOi8vXCIgKyBwYXJzZWRGcm9tSGVhZGVycztcbiAgfVxuICBpZiAoIXBhcnNlZEZyb21IZWFkZXJzIHx8IHBhcnNlZEZyb21IZWFkZXJzLmluY2x1ZGVzKFwibG9jYWxob3N0XCIpKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgW1xuICAgICAgICBcIltVVF0gW1dBUk5dIFlvdSBhcmUgdXNpbmcgYSBsb2NhbGhvc3QgY2FsbGJhY2sgdXJsIGluIHByb2R1Y3Rpb24gd2hpY2ggaXMgbm90IHN1cHBvcnRlZC5cIixcbiAgICAgICAgXCJSZWFkIG1vcmUgYW5kIGxlYXJuIGhvdyB0byBmaXggaXQgaGVyZTogaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZmFxI215LWNhbGxiYWNrLXJ1bnMtaW4tZGV2ZWxvcG1lbnQtYnV0LW5vdC1pbi1wcm9kdWN0aW9uXCJcbiAgICAgIF0uam9pbihcIiBcIilcbiAgICApO1xuICAgIHJldHVybiBjYWxsYmFja1VybDtcbiAgfVxuICByZXR1cm4gZ2V0RnVsbEFwaVVybChwYXJzZWRGcm9tSGVhZGVycyk7XG59XG52YXIgYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyID0gKG9wdHMpID0+IHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb25zdCByID0gb3B0cy5yb3V0ZXI7XG4gICAgY29uc3QgcGVybWlzc2lvbnMgPSBPYmplY3Qua2V5cyhyKS5tYXAoKGspID0+IHtcbiAgICAgIGNvbnN0IHJvdXRlID0gcltrXTtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHBhcnNlQW5kRXhwYW5kSW5wdXRDb25maWcocm91dGUuX2RlZi5yb3V0ZXJDb25maWcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2x1ZzogayxcbiAgICAgICAgY29uZmlnXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBwZXJtaXNzaW9ucztcbiAgfTtcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC91cGxvYWQtYnVpbGRlci50c1xuZnVuY3Rpb24gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKGluaXREZWYgPSB7fSkge1xuICBjb25zdCBfZGVmID0ge1xuICAgIC8vIERlZmF1bHQgcm91dGVyIGNvbmZpZ1xuICAgIHJvdXRlckNvbmZpZzoge1xuICAgICAgaW1hZ2U6IHtcbiAgICAgICAgbWF4RmlsZVNpemU6IFwiNE1CXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIGlucHV0UGFyc2VyOiB7IHBhcnNlOiAoKSA9PiAoe30pLCBfaW5wdXQ6IHt9LCBfb3V0cHV0OiB7fSB9LFxuICAgIG1pZGRsZXdhcmU6ICgpID0+ICh7fSksXG4gICAgb25VcGxvYWRFcnJvcjogKCkgPT4gKHt9KSxcbiAgICBlcnJvckZvcm1hdHRlcjogaW5pdERlZi5lcnJvckZvcm1hdHRlciA/PyBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIsXG4gICAgLy8gT3ZlcmxvYWQgd2l0aCBwcm9wZXJ0aWVzIHBhc3NlZCBpblxuICAgIC4uLmluaXREZWZcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBpbnB1dCh1c2VyUGFyc2VyKSB7XG4gICAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgLi4uX2RlZixcbiAgICAgICAgaW5wdXRQYXJzZXI6IHVzZXJQYXJzZXJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbWlkZGxld2FyZSh1c2VyTWlkZGxld2FyZSkge1xuICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgIC4uLl9kZWYsXG4gICAgICAgIG1pZGRsZXdhcmU6IHVzZXJNaWRkbGV3YXJlXG4gICAgICB9KTtcbiAgICB9LFxuICAgIG9uVXBsb2FkQ29tcGxldGUodXNlclVwbG9hZENvbXBsZXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfZGVmLFxuICAgICAgICByZXNvbHZlcjogdXNlclVwbG9hZENvbXBsZXRlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb25VcGxvYWRFcnJvcih1c2VyT25VcGxvYWRFcnJvcikge1xuICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgIC4uLl9kZWYsXG4gICAgICAgIG9uVXBsb2FkRXJyb3I6IHVzZXJPblVwbG9hZEVycm9yXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVCdWlsZGVyKG9wdHMpIHtcbiAgcmV0dXJuIChpbnB1dCkgPT4ge1xuICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgcm91dGVyQ29uZmlnOiBpbnB1dCxcbiAgICAgIC4uLm9wdHNcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IHtcbiAgVVBMT0FEVEhJTkdfVkVSU0lPTixcbiAgZGVmYXVsdEVycm9yRm9ybWF0dGVyLFxuICBmb3JtYXRFcnJvcixcbiAgdW5zZXRNYXJrZXIsXG4gIFZBTElEX0FDVElPTl9UWVBFUyxcbiAgYnVpbGRSZXF1ZXN0SGFuZGxlcixcbiAgYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyLFxuICBjcmVhdGVCdWlsZGVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstVFg0RUdKNFMubWpzLm1hcCJdLCJuYW1lcyI6WyJnZXRGdWxsQXBpVXJsIiwicGFja2FnZV9kZWZhdWx0IiwibmFtZSIsInZlcnNpb24iLCJlbmdpbmVzIiwibm9kZSIsImxpY2Vuc2UiLCJleHBvcnRzIiwidHlwZXMiLCJpbXBvcnQiLCJyZXF1aXJlIiwiZmlsZXMiLCJwdWJsaXNoQ29uZmlnIiwiYWNjZXNzIiwidHlwZXNWZXJzaW9ucyIsImNsaWVudCIsInNlcnZlciIsIm5leHQiLCJ0dyIsImV4cHJlc3MiLCJmYXN0aWZ5IiwiaDMiLCJzY3JpcHRzIiwibGludCIsImJ1aWxkIiwiY2xlYW4iLCJkZXYiLCJ0ZXN0IiwidHlwZWNoZWNrIiwiZGVwZW5kZW5jaWVzIiwiZGV2RGVwZW5kZW5jaWVzIiwiZXNsaW50IiwidGFpbHdpbmRjc3MiLCJ0c3VwIiwidHlwZXNjcmlwdCIsInVuZGljaSIsInZpdGVzdCIsInpvZCIsImVzbGludENvbmZpZyIsInJvb3QiLCJleHRlbmRzIiwiRXJyb3IiLCJVUExPQURUSElOR19WRVJTSU9OIiwiZGVmYXVsdEVycm9yRm9ybWF0dGVyIiwiZXJyb3IiLCJtZXNzYWdlIiwiZm9ybWF0RXJyb3IiLCJyb3V0ZXIiLCJfYSIsImVycm9yRm9ybWF0dGVyIiwiT2JqZWN0Iiwia2V5cyIsIl9kZWYiLCJ1bnNldE1hcmtlciIsIlZBTElEX0FDVElPTl9UWVBFUyIsImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwiLCJnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMMiIsImdldFR5cGVGcm9tRmlsZU5hbWUiLCJpc09iamVjdCIsIm9iamVjdEtleXMiLCJmaWxsSW5wdXRSb3V0ZUNvbmZpZyIsInBhcnNlQW5kRXhwYW5kSW5wdXRDb25maWciLCJzYWZlUGFyc2VKU09OIiwiVXBsb2FkVGhpbmdFcnJvciIsIlVwbG9hZFRoaW5nRXJyb3IyIiwicG9sbEZvckZpbGVEYXRhIiwiaXNWYWxpZFJlc3BvbnNlIiwicmVzcG9uc2UiLCJvayIsInN0YXR1cyIsImhlYWRlcnMiLCJoYXMiLCJjb25kaXRpb25hbERldlNlcnZlciIsIm9wdHMiLCJwcm9jZXNzIiwiZmlsZURhdGEiLCJ1cmwiLCJmaWxlS2V5IiwiYXBpS2V5Iiwic2RrVmVyc2lvbiIsImpzb24iLCJmaWxlIiwiY2FsbGJhY2tVcmwiLCJjYWxsYmFja1NsdWciLCJzdGFydHNXaXRoIiwiY29uc29sZSIsImxvZyIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZXRhZGF0YSIsInBhcnNlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwia2V5IiwiZmlsZU5hbWUiLCJzaXplIiwiZmlsZVNpemUiLCJjb2RlIiwiZ2V0UGFyc2VGbiIsInBhcnNlciIsImNyZWF0ZVVURmV0Y2giLCJlbmRwb2ludCIsInBheWxvYWQiLCJmaWxlQ291bnRMaW1pdEhpdCIsInJvdXRlQ29uZmlnIiwiY291bnRzIiwiZm9yRWFjaCIsInR5cGUiLCJfa2V5IiwiY291bnQiLCJsaW1pdCIsIm1heEZpbGVDb3VudCIsImNhdXNlIiwibGltaXRIaXQiLCJnZXRIZWFkZXIiLCJyZXEiLCJIZWFkZXJzIiwiZ2V0IiwiYnVpbGRSZXF1ZXN0SGFuZGxlciIsImlucHV0IiwicmVzIiwiZXZlbnQiLCJjb25maWciLCJwcmVmZXJyZWRPckVudlNlY3JldCIsInVwbG9hZHRoaW5nU2VjcmV0IiwiZW52IiwiVVBMT0FEVEhJTkdfU0VDUkVUIiwiVVJMIiwiaHJlZiIsInBhcmFtcyIsInNlYXJjaFBhcmFtcyIsInVwbG9hZHRoaW5nSG9vayIsInNsdWciLCJhY3Rpb25UeXBlIiwidXBsb2FkYWJsZSIsInV0RmV0Y2giLCJtYXliZVJlcUJvZHkiLCJyZXMyIiwicmVzb2x2ZXIiLCJjYWxsYmFja0RhdGEiLCJpbmNsdWRlcyIsIm1hcCIsIngiLCJqb2luIiwicmVwbGFjZSIsIm1heWJlSW5wdXQiLCJ1c2VySW5wdXQiLCJwYXJzZWRJbnB1dCIsImlucHV0UGFyc2VyIiwibWlkZGxld2FyZSIsIkFycmF5IiwiaXNBcnJheSIsImV2ZXJ5IiwiZiIsInBhcnNlZENvbmZpZyIsInJvdXRlckNvbmZpZyIsInJlc29sdmVDYWxsYmFja1VybCIsInVwbG9hZHRoaW5nQXBpUmVzcG9uc2UiLCJvcmlnaW4iLCJwYXRobmFtZSIsInBhcnNlZFJlc3BvbnNlIiwicG9sbGluZ1VybCIsImNvbXBsZXRlUmVzIiwidXBsb2FkSWQiLCJldGFncyIsIm9uVXBsb2FkRXJyb3IiLCJfYiIsIlVQTE9BRFRISU5HX1VSTCIsImhvc3QiLCJwYXJzZWRGcm9tSGVhZGVycyIsInRvU3RyaW5nIiwid2FybiIsImJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlciIsInIiLCJwZXJtaXNzaW9ucyIsImsiLCJyb3V0ZSIsImludGVybmFsQ3JlYXRlQnVpbGRlciIsImluaXREZWYiLCJpbWFnZSIsIm1heEZpbGVTaXplIiwiX2lucHV0IiwiX291dHB1dCIsInVzZXJQYXJzZXIiLCJ1c2VyTWlkZGxld2FyZSIsIm9uVXBsb2FkQ29tcGxldGUiLCJ1c2VyVXBsb2FkQ29tcGxldGUiLCJ1c2VyT25VcGxvYWRFcnJvciIsImNyZWF0ZUJ1aWxkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-TX4EGJ4S.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-WPSY3MFJ.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-WPSY3MFJ.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   incompatibleNodeGuard: () => (/* binding */ incompatibleNodeGuard)\n/* harmony export */ });\n// src/internal/incompat-node-guard.ts\nfunction incompatibleNodeGuard() {\n    var _a, _b, _c, _d;\n    if (typeof process === \"undefined\") return;\n    let major;\n    let minor;\n    const maybeNodeVersion = (_b = (_a = process.versions) == null ? void 0 : _a.node) == null ? void 0 : _b.split(\".\");\n    if (maybeNodeVersion) {\n        [major, minor] = maybeNodeVersion.map((v)=>parseInt(v, 10));\n    }\n    const maybeNodePath = (_c = process.env) == null ? void 0 : _c.NODE;\n    if (!major && maybeNodePath) {\n        const nodeVersion = (_d = /v(\\d+)\\.(\\d+)\\.(\\d+)/.exec(maybeNodePath)) == null ? void 0 : _d[0];\n        if (nodeVersion) {\n            [major, minor] = nodeVersion.substring(1).split(\".\").map((v)=>parseInt(v, 10));\n        }\n    }\n    if (!major || !minor) return;\n    if (major > 18) return;\n    if (major === 18 && minor >= 13) return;\n    console.error(`[UT]: YOU ARE USING A LEGACY (${major}.${minor}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`);\n    process.exit(1);\n}\n //# sourceMappingURL=chunk-WPSY3MFJ.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1XUFNZM01GSi5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHNDQUFzQztBQUN0QyxTQUFTQTtJQUNQLElBQUlDLElBQUlDLElBQUlDLElBQUlDO0lBQ2hCLElBQUksT0FBT0MsWUFBWSxhQUNyQjtJQUNGLElBQUlDO0lBQ0osSUFBSUM7SUFDSixNQUFNQyxtQkFBbUIsQ0FBQ04sS0FBSyxDQUFDRCxLQUFLSSxRQUFRSSxRQUFRLEtBQUssT0FBTyxLQUFLLElBQUlSLEdBQUdTLElBQUksS0FBSyxPQUFPLEtBQUssSUFBSVIsR0FBR1MsS0FBSyxDQUFDO0lBQy9HLElBQUlILGtCQUFrQjtRQUNwQixDQUFDRixPQUFPQyxNQUFNLEdBQUdDLGlCQUFpQkksR0FBRyxDQUFDLENBQUNDLElBQU1DLFNBQVNELEdBQUc7SUFDM0Q7SUFDQSxNQUFNRSxnQkFBZ0IsQ0FBQ1osS0FBS0UsUUFBUVcsR0FBRyxLQUFLLE9BQU8sS0FBSyxJQUFJYixHQUFHYyxJQUFJO0lBQ25FLElBQUksQ0FBQ1gsU0FBU1MsZUFBZTtRQUMzQixNQUFNRyxjQUFjLENBQUNkLEtBQUssdUJBQXVCZSxJQUFJLENBQUNKLGNBQWEsS0FBTSxPQUFPLEtBQUssSUFBSVgsRUFBRSxDQUFDLEVBQUU7UUFDOUYsSUFBSWMsYUFBYTtZQUNmLENBQUNaLE9BQU9DLE1BQU0sR0FBR1csWUFBWUUsU0FBUyxDQUFDLEdBQUdULEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUMsQ0FBQ0MsSUFBTUMsU0FBU0QsR0FBRztRQUM5RTtJQUNGO0lBQ0EsSUFBSSxDQUFDUCxTQUFTLENBQUNDLE9BQ2I7SUFDRixJQUFJRCxRQUFRLElBQ1Y7SUFDRixJQUFJQSxVQUFVLE1BQU1DLFNBQVMsSUFDM0I7SUFDRmMsUUFBUUMsS0FBSyxDQUNYLENBQUMsOEJBQThCLEVBQUVoQixNQUFNLENBQUMsRUFBRUMsTUFBTSwrRUFBK0UsQ0FBQztJQUVsSUYsUUFBUWtCLElBQUksQ0FBQztBQUNmO0FBSUUsQ0FDRiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ldmVudGx5Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvY2h1bmstV1BTWTNNRkoubWpzPzdiNTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVybmFsL2luY29tcGF0LW5vZGUtZ3VhcmQudHNcbmZ1bmN0aW9uIGluY29tcGF0aWJsZU5vZGVHdWFyZCgpIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgcmV0dXJuO1xuICBsZXQgbWFqb3I7XG4gIGxldCBtaW5vcjtcbiAgY29uc3QgbWF5YmVOb2RlVmVyc2lvbiA9IChfYiA9IChfYSA9IHByb2Nlc3MudmVyc2lvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ub2RlKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3BsaXQoXCIuXCIpO1xuICBpZiAobWF5YmVOb2RlVmVyc2lvbikge1xuICAgIFttYWpvciwgbWlub3JdID0gbWF5YmVOb2RlVmVyc2lvbi5tYXAoKHYpID0+IHBhcnNlSW50KHYsIDEwKSk7XG4gIH1cbiAgY29uc3QgbWF5YmVOb2RlUGF0aCA9IChfYyA9IHByb2Nlc3MuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2MuTk9ERTtcbiAgaWYgKCFtYWpvciAmJiBtYXliZU5vZGVQYXRoKSB7XG4gICAgY29uc3Qgbm9kZVZlcnNpb24gPSAoX2QgPSAvdihcXGQrKVxcLihcXGQrKVxcLihcXGQrKS8uZXhlYyhtYXliZU5vZGVQYXRoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kWzBdO1xuICAgIGlmIChub2RlVmVyc2lvbikge1xuICAgICAgW21ham9yLCBtaW5vcl0gPSBub2RlVmVyc2lvbi5zdWJzdHJpbmcoMSkuc3BsaXQoXCIuXCIpLm1hcCgodikgPT4gcGFyc2VJbnQodiwgMTApKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFtYWpvciB8fCAhbWlub3IpXG4gICAgcmV0dXJuO1xuICBpZiAobWFqb3IgPiAxOClcbiAgICByZXR1cm47XG4gIGlmIChtYWpvciA9PT0gMTggJiYgbWlub3IgPj0gMTMpXG4gICAgcmV0dXJuO1xuICBjb25zb2xlLmVycm9yKFxuICAgIGBbVVRdOiBZT1UgQVJFIFVTSU5HIEEgTEVHQUNZICgke21ham9yfS4ke21pbm9yfSkgTk9ERSBWRVJTSU9OIFdISUNIIElTTidUIE9GRklDSUFMTFkgU1VQUE9SVEVELiBQTEVBU0UgVVBHUkFERSBUTyBOT0RFIF4xOC4xMy5gXG4gICk7XG4gIHByb2Nlc3MuZXhpdCgxKTtcbn1cblxuZXhwb3J0IHtcbiAgaW5jb21wYXRpYmxlTm9kZUd1YXJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstV1BTWTNNRkoubWpzLm1hcCJdLCJuYW1lcyI6WyJpbmNvbXBhdGlibGVOb2RlR3VhcmQiLCJfYSIsIl9iIiwiX2MiLCJfZCIsInByb2Nlc3MiLCJtYWpvciIsIm1pbm9yIiwibWF5YmVOb2RlVmVyc2lvbiIsInZlcnNpb25zIiwibm9kZSIsInNwbGl0IiwibWFwIiwidiIsInBhcnNlSW50IiwibWF5YmVOb2RlUGF0aCIsImVudiIsIk5PREUiLCJub2RlVmVyc2lvbiIsImV4ZWMiLCJzdWJzdHJpbmciLCJjb25zb2xlIiwiZXJyb3IiLCJleGl0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-WPSY3MFJ.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/next.mjs":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/dist/next.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNextRouteHandler: () => (/* binding */ createNextRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing)\n/* harmony export */ });\n/* harmony import */ var _chunk_CFWCJEOQ_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-CFWCJEOQ.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-CFWCJEOQ.mjs\");\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_WPSY3MFJ_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-WPSY3MFJ.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-WPSY3MFJ.mjs\");\n/* harmony import */ var _chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-TX4EGJ4S.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-TX4EGJ4S.mjs\");\n/* harmony import */ var _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-4PDGVH57.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\");\n\n\n\n\n\n// src/next.ts\nvar createUploadthing = (opts)=>(0,_chunk_TX4EGJ4S_mjs__WEBPACK_IMPORTED_MODULE_3__.createBuilder)(opts);\nvar createNextRouteHandler = (opts)=>{\n    const handlers = (0,_chunk_CFWCJEOQ_mjs__WEBPACK_IMPORTED_MODULE_0__.createServerHandler)(opts);\n    return {\n        POST: (req)=>handlers.POST(req),\n        GET: (req)=>handlers.GET(req)\n    };\n};\n //# sourceMappingURL=next.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9uZXh0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBRThCO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFOUIsY0FBYztBQUNkLElBQUlFLG9CQUFvQixDQUFDQyxPQUFTRixrRUFBYUEsQ0FBQ0U7QUFDaEQsSUFBSUMseUJBQXlCLENBQUNEO0lBQzVCLE1BQU1FLFdBQVdMLHdFQUFtQkEsQ0FBQ0c7SUFDckMsT0FBTztRQUNMRyxNQUFNLENBQUNDLE1BQVFGLFNBQVNDLElBQUksQ0FBQ0M7UUFDN0JDLEtBQUssQ0FBQ0QsTUFBUUYsU0FBU0csR0FBRyxDQUFDRDtJQUM3QjtBQUNGO0FBSUUsQ0FDRixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ldmVudGx5Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvbmV4dC5tanM/YzU1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVTZXJ2ZXJIYW5kbGVyXG59IGZyb20gXCIuL2NodW5rLUNGV0NKRU9RLm1qc1wiO1xuaW1wb3J0IFwiLi9jaHVuay1TM1IzVlhSSy5tanNcIjtcbmltcG9ydCBcIi4vY2h1bmstV1BTWTNNRkoubWpzXCI7XG5pbXBvcnQge1xuICBjcmVhdGVCdWlsZGVyXG59IGZyb20gXCIuL2NodW5rLVRYNEVHSjRTLm1qc1wiO1xuaW1wb3J0IFwiLi9jaHVuay00UERHVkg1Ny5tanNcIjtcblxuLy8gc3JjL25leHQudHNcbnZhciBjcmVhdGVVcGxvYWR0aGluZyA9IChvcHRzKSA9PiBjcmVhdGVCdWlsZGVyKG9wdHMpO1xudmFyIGNyZWF0ZU5leHRSb3V0ZUhhbmRsZXIgPSAob3B0cykgPT4ge1xuICBjb25zdCBoYW5kbGVycyA9IGNyZWF0ZVNlcnZlckhhbmRsZXIob3B0cyk7XG4gIHJldHVybiB7XG4gICAgUE9TVDogKHJlcSkgPT4gaGFuZGxlcnMuUE9TVChyZXEpLFxuICAgIEdFVDogKHJlcSkgPT4gaGFuZGxlcnMuR0VUKHJlcSlcbiAgfTtcbn07XG5leHBvcnQge1xuICBjcmVhdGVOZXh0Um91dGVIYW5kbGVyLFxuICBjcmVhdGVVcGxvYWR0aGluZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5leHQubWpzLm1hcCJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJIYW5kbGVyIiwiY3JlYXRlQnVpbGRlciIsImNyZWF0ZVVwbG9hZHRoaW5nIiwib3B0cyIsImNyZWF0ZU5leHRSb3V0ZUhhbmRsZXIiLCJoYW5kbGVycyIsIlBPU1QiLCJyZXEiLCJHRVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/next.mjs\n");

/***/ })

};
;